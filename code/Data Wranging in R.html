<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.34">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Patrick Chester">
<meta name="dcterms.date" content="2026-02-09">

<title>Data Wrangling in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Data Wranging in R_files/libs/clipboard/clipboard.min.js"></script>
<script src="Data Wranging in R_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Data Wranging in R_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Data Wranging in R_files/libs/quarto-html/popper.min.js"></script>
<script src="Data Wranging in R_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Data Wranging in R_files/libs/quarto-html/anchor.min.js"></script>
<link href="Data Wranging in R_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Data Wranging in R_files/libs/quarto-html/quarto-syntax-highlighting-c8ad9e5dbd60b7b70b38521ab19b7da4.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Data Wranging in R_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Data Wranging in R_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Data Wranging in R_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Wrangling in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Patrick Chester </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 9, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>What is Data Wrangling? - The process of transforming and mapping data from a raw form into another format that allows for more convenient consumption of the data with the goal of making it more appropriate for analysis.</p>
<section id="i.-brief-overview-of-data-types" class="level1">
<h1>I. Brief Overview of Data Types</h1>
<p>Remove all objects and packages in your current environment</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="vectors" class="level2">
<h2 class="anchored" data-anchor-id="vectors">Vectors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">75</span>, <span class="dv">15</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>), <span class="at">times =</span> <span class="dv">25</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">1</span>, .<span class="dv">5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can subset vectors using index numbers</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>v2[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] A B C D A B C D A B
Levels: A B C D</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>v2[<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">12</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] D D D
Levels: A B C D</code></pre>
</div>
</div>
</section>
<section id="data-frames" class="level2">
<h2 class="anchored" data-anchor-id="data-frames">Data Frames</h2>
<p>Extracting variables from a data frame using a $ operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(v1, v2, v3)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>v1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  69.29568  74.46371  51.94245  74.63473  61.46560 112.36996  87.35408
  [8]  74.31320  72.73382  52.72002  70.76609  62.42336  82.59047  62.32422
 [15]  74.81002  71.94457  70.84087  94.07281  55.81024  77.75796  60.54816
 [22]  63.58616  63.05948  52.15551  88.34290  82.85800  67.98125  79.01729
 [29]  70.21346  68.88633  94.00818  49.98614  54.77107  66.19780  63.97561
 [36]  89.15301  66.04441  77.92584  75.68831  66.51321 117.79325  70.21335
 [43]  40.01659  64.78014  93.16617  75.38667  58.02500  94.60240  91.23454
 [50]  61.26067  93.89793 101.08313  59.33110  43.91608  61.81693  64.46699
 [57]  57.16531  78.21461  72.10382  70.41176  87.77097  63.75110  95.34251
 [64] 102.91580  69.71805  74.19039  74.47036  92.08684  77.05109  76.17551
 [71]  66.92563  66.05313  84.09383  70.39141  89.60828  83.84603  76.44337
 [78]  61.42480  71.14220  68.32017  40.82188  95.71756  52.06872  60.88343
 [85]  62.67821  80.59259  91.20936  77.52900  63.87912  70.83260  72.78488
 [92]  58.12635  86.98916  49.23254  75.88746  70.43077  71.44088  65.74989
 [99]  86.58944  92.03381</code></pre>
</div>
</div>
<p>Selecting a subset of a data frame using row indexes and column names</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mydata[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">c</span>(<span class="st">"v1"</span>, <span class="st">"v2"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          v1 v2
1   69.29568  A
2   74.46371  B
3   51.94245  C
4   74.63473  D
5   61.46560  A
6  112.36996  B
7   87.35408  C
8   74.31320  D
9   72.73382  A
10  52.72002  B</code></pre>
</div>
</div>
<p>Other methods of data type conversion: - as.numeric() - as.character() - as.vector() - as.matrix() - as.data.frame() - as.factor()</p>
</section>
</section>
<section id="ii.-data-management" class="level1">
<h1>II. Data Management</h1>
<section id="a.-working-with-strings" class="level2">
<h2 class="anchored" data-anchor-id="a.-working-with-strings">A. Working with Strings</h2>
<section id="regular-expressions" class="level3">
<h3 class="anchored" data-anchor-id="regular-expressions">Regular expressions</h3>
<p><em>grep:</em> Identifying strings that match a particular criteria</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Alabama'</span>, <span class="st">'New York'</span>, <span class="st">'Colorado'</span>, <span class="st">'Minnesota'</span>, <span class="st">'South Carolina'</span>, <span class="st">'Wyoming'</span>, <span class="st">'New Jersey'</span>, <span class="st">'Nevada'</span>, <span class="st">'Texas'</span>, <span class="st">'Iowa'</span>, <span class="st">'Maine'</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">'a'</span>, states, <span class="at">value =</span> <span class="cn">TRUE</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Alabama"        "Colorado"       "Minnesota"      "South Carolina"
[5] "Nevada"         "Texas"          "Iowa"           "Maine"         </code></pre>
</div>
</div>
<p><em>gsub:</em> Replacing instances of a string with another of your choosing</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">"South"</span>, <span class="at">replacement =</span> <span class="st">"North"</span>, states[<span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "North Carolina"</code></pre>
</div>
</div>
<p><em>gregexpr:</em> Identifying positions of a string of interest</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(positions_a <span class="ot">&lt;-</span> <span class="fu">gregexpr</span>(<span class="at">pattern =</span> <span class="st">"a"</span>, <span class="at">text =</span> states, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1 3 5 7
attr(,"match.length")
[1] 1 1 1 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[2]]
[1] -1
attr(,"match.length")
[1] -1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[3]]
[1] 6
attr(,"match.length")
[1] 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[4]]
[1] 9
attr(,"match.length")
[1] 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[5]]
[1]  8 14
attr(,"match.length")
[1] 1 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[6]]
[1] -1
attr(,"match.length")
[1] -1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[7]]
[1] -1
attr(,"match.length")
[1] -1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[8]]
[1] 4 6
attr(,"match.length")
[1] 1 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[9]]
[1] 4
attr(,"match.length")
[1] 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[10]]
[1] 4
attr(,"match.length")
[1] 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[11]]
[1] 2
attr(,"match.length")
[1] 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="paste" class="level3">
<h3 class="anchored" data-anchor-id="paste">Paste</h3>
<p>Use separators to combine strings with other characters or numbers</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"X"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">sep =</span> <span class="st">"."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "X.1" "X.2" "X.3" "X.4" "X.5"</code></pre>
</div>
</div>
<p>Use collapse to combine multiple string outputs together</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"X"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">sep =</span> <span class="st">"."</span>, <span class="at">collapse =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "X.1X.2X.3X.4X.5"</code></pre>
</div>
</div>
<p>paste0 is the same as paste with an empty separator</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"X"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "X1" "X2" "X3" "X4" "X5"</code></pre>
</div>
</div>
<p>NOTE: paste0 does not have a “sep” option that can be modified by the user</p>
<p>paste0(“a”, “b”, sep = “c”) == paste0(“a”, “b”, “c”)</p>
<p>paste0(rep(c(“A”,“C”,“G”,“T”), each=4), c(“A”,“C”,“G”,“T”), collapse = ““)</p>
</section>
<section id="extra-material-other-string-manipulations" class="level3">
<h3 class="anchored" data-anchor-id="extra-material-other-string-manipulations">Extra material: Other string manipulations</h3>
<p>Changing the case of strings</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>string1 <span class="ot">&lt;-</span> <span class="st">'Stevens Institute of Technology'</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(string1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "stevens institute of technology"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(string1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "STEVENS INSTITUTE OF TECHNOLOGY"</code></pre>
</div>
</div>
</section>
<section id="exercise-1-exercise-with-strings-3-minutes" class="level3">
<h3 class="anchored" data-anchor-id="exercise-1-exercise-with-strings-3-minutes">Exercise 1: Exercise with Strings (3 minutes)</h3>
<p>Create this string ‘A&amp;1B&amp;2C&amp;3’ using a paste function</p>
</section>
</section>
<section id="b.-working-with-dates" class="level2">
<h2 class="anchored" data-anchor-id="b.-working-with-dates">B. Working with Dates</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'11/28/2011'</span>, <span class="st">'12/07/2012'</span>, <span class="st">'08/01/2013'</span>, <span class="st">'02/09/2015'</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>real_dates <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(dates, <span class="at">format =</span> <span class="st">'%m/%d/%Y'</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(real_dates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>other_format <span class="ot">&lt;-</span> <span class="fu">format</span>(real_dates, <span class="st">'%A %B %d, %Y'</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(other_format)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>For the codes used to identify and format dates:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>?strptime</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Identifying how long ago dates occurred</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>today <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>(dif <span class="ot">&lt;-</span> today <span class="sc">-</span> real_dates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time differences in days
[1] 5187 4812 4575 4018</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dif)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "difftime"</code></pre>
</div>
</div>
<p>To make a difference in times with a particular time unit of interest use difftime</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">difftime</span>(today, real_dates, <span class="at">units =</span> <span class="st">"hours"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time differences in hours
[1] 124488 115488 109800  96432</code></pre>
</div>
</div>
<section id="extra-materials-lubridate" class="level3">
<h3 class="anchored" data-anchor-id="extra-materials-lubridate">Extra Materials: Lubridate</h3>
<p>The lubridate package contains a powerful set of tools that can be used to extract and interact with dates.</p>
<p>There are functions like <em>mdy</em> that allow for simpler extration of date information from strings.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("lubridate")</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>(lubri_dates <span class="ot">&lt;-</span> <span class="fu">mdy</span>(dates))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2011-11-28" "2012-12-07" "2013-08-01" "2015-02-09"</code></pre>
</div>
</div>
<p>Extracting specific date information from a date object</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(lubri_dates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2011 2012 2013 2015</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">month</span>(lubri_dates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11 12  8  2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">day</span>(lubri_dates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28  7  1  9</code></pre>
</div>
</div>
</section>
<section id="exercise-2-exercise-with-dates" class="level3">
<h3 class="anchored" data-anchor-id="exercise-2-exercise-with-dates">Exercise 2: Exercise with Dates</h3>
<ol type="a">
<li>Take the following date (November 11, 2011) and turn it into a date vector in R</li>
<li>Display the date vector in the format (month.day.year’)</li>
</ol>
</section>
</section>
<section id="c.-subsetting-data-sets" class="level2">
<h2 class="anchored" data-anchor-id="c.-subsetting-data-sets">C. Subsetting Data Sets</h2>
<p>Loading star data into our environment from the <code>data</code> directory</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the directory location to wherever your Data-Storytelling-2026 directory is</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>star <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"~/Dropbox/SIT/SIT_Classes/Public_Pages/Data-Storytelling-2026/supplemental/DSS/STAR.csv"</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(star)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  classtype reading math graduated
1     small     578  610         1
2   regular     612  612         1
3   regular     583  606         1
4     small     661  648         1
5     small     614  636         1
6   regular     610  603         0</code></pre>
</div>
</div>
<section id="selecting-cases-using-base-r" class="level3">
<h3 class="anchored" data-anchor-id="selecting-cases-using-base-r">Selecting Cases using base R</h3>
<p>Identifying index numbers of interest</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(star<span class="sc">$</span>classtype <span class="sc">==</span> <span class="st">'small'</span>)  <span class="co"># reports indicies       </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]    1    4    5    7    8   15   17   19   20   21   22   24   25   27   28
 [16]   30   32   34   36   38   43   44   45   46   47   49   50   51   55   56
 [31]   59   61   62   63   64   67   68   69   70   71   72   76   77   78   80
 [46]   83   84   89   90   92   97   98   99  102  103  104  106  107  108  114
 [61]  115  117  121  126  127  128  129  130  132  133  136  138  139  140  141
 [76]  151  153  157  159  165  166  169  170  175  177  178  179  184  185  186
 [91]  189  190  191  194  196  197  200  203  210  211  212  214  217  219  220
[106]  222  224  225  226  227  230  233  236  238  242  244  245  246  247  249
[121]  250  254  255  256  259  261  262  263  265  267  268  269  273  275  277
[136]  279  281  282  283  284  285  287  288  290  291  292  293  294  296  298
[151]  300  301  302  303  305  307  308  309  315  316  318  320  321  325  328
[166]  330  333  335  337  338  341  342  344  345  346  347  349  351  352  353
[181]  354  356  357  362  366  370  371  376  379  381  382  383  385  386  388
[196]  390  393  400  403  404  412  413  414  417  418  419  420  421  423  425
[211]  435  438  440  442  443  444  446  447  449  454  458  459  465  466  468
[226]  470  474  475  476  477  478  482  485  490  491  494  497  499  500  502
[241]  503  504  507  508  509  510  512  515  524  525  528  530  531  537  540
[256]  541  543  547  551  556  557  560  561  563  564  571  574  576  577  580
[271]  582  583  584  586  587  588  589  593  599  601  602  603  604  610  612
[286]  615  616  632  634  638  640  644  645  648  650  651  657  659  664  665
[301]  667  668  669  672  673  674  675  677  681  683  684  689  694  695  696
[316]  698  700  703  704  705  709  710  713  714  715  717  719  720  721  727
[331]  738  740  743  744  745  747  751  752  753  755  757  760  761  762  765
[346]  766  768  770  772  773  779  780  782  784  785  788  790  791  792  793
[361]  795  801  802  805  806  807  809  810  811  812  814  815  820  824  825
[376]  827  828  834  835  836  838  839  840  841  842  843  844  845  848  849
[391]  852  857  859  860  862  864  865  866  867  870  871  872  873  874  875
[406]  878  879  887  889  890  891  893  894  900  904  905  909  916  917  918
[421]  921  922  925  926  927  928  929  932  934  935  936  939  945  946  947
[436]  949  955  958  959  961  962  964  969  971  976  977  980  983  985  989
[451]  990  996 1001 1003 1006 1007 1008 1009 1011 1018 1019 1020 1024 1025 1026
[466] 1029 1031 1032 1033 1039 1041 1043 1044 1046 1050 1051 1052 1053 1055 1058
[481] 1059 1061 1067 1072 1073 1079 1080 1086 1087 1088 1091 1092 1099 1103 1104
[496] 1105 1107 1108 1109 1110 1111 1114 1116 1117 1119 1120 1121 1122 1123 1124
[511] 1125 1127 1128 1130 1131 1132 1133 1135 1136 1137 1139 1140 1141 1142 1143
[526] 1145 1146 1147 1148 1149 1152 1155 1156 1157 1158 1160 1161 1162 1163 1164
[541] 1167 1171 1172 1174 1176 1179 1181 1185 1186 1187 1193 1198 1201 1203 1206
[556] 1207 1208 1211 1215 1219 1220 1221 1229 1230 1231 1233 1234 1235 1237 1238
[571] 1239 1242 1244 1245 1246 1250 1256 1262 1266 1267 1268 1269 1271 1272 1274</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(star<span class="sc">$</span>reading <span class="sc">&gt;</span> <span class="dv">600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]    2    4    5    6    8    9   10   13   16   17   21   24   25   27   29
 [16]   33   34   35   36   37   40   41   42   44   45   49   50   52   53   54
 [31]   55   56   58   60   61   62   63   64   65   66   67   68   69   70   71
 [46]   72   73   74   75   76   77   78   79   80   81   82   83   84   85   86
 [61]   88   90   91   92   93   94   95   96   97   99  100  101  102  103  104
 [76]  105  107  108  109  111  113  114  115  116  117  121  122  123  124  125
 [91]  126  127  128  130  131  132  133  134  135  136  137  138  139  140  141
[106]  143  145  146  147  148  150  151  154  155  156  157  159  160  162  164
[121]  165  166  167  168  169  171  172  174  175  176  178  179  180  181  182
[136]  184  185  186  187  188  189  190  195  196  197  198  199  200  201  202
[151]  204  205  206  207  209  210  212  213  214  216  217  218  219  220  221
[166]  223  225  226  227  228  229  230  231  233  234  235  236  237  238  240
[181]  241  242  243  244  245  246  248  250  252  253  254  257  258  259  260
[196]  261  263  265  266  267  268  269  270  272  273  274  275  276  277  278
[211]  279  281  282  283  284  286  287  288  290  291  293  294  295  296  298
[226]  299  300  301  302  303  304  306  307  308  310  311  312  314  315  316
[241]  317  318  319  320  322  323  325  326  327  328  329  330  331  333  334
[256]  336  337  338  340  341  342  344  345  347  348  349  350  351  353  354
[271]  359  360  362  363  364  365  366  367  369  370  371  372  373  374  377
[286]  378  379  380  381  383  384  385  386  388  389  390  393  394  395  396
[301]  398  400  401  402  403  404  405  406  409  411  413  415  416  417  418
[316]  420  421  422  423  424  425  426  427  428  430  432  433  434  435  436
[331]  437  439  440  441  442  443  444  445  446  447  448  449  450  451  452
[346]  453  454  455  456  459  461  466  467  468  470  472  473  474  475  476
[361]  477  478  479  480  481  482  484  485  486  487  488  489  490  491  492
[376]  493  494  495  496  498  500  501  502  505  506  507  508  509  510  512
[391]  513  517  519  520  521  524  525  526  528  530  533  534  536  537  538
[406]  539  540  543  544  546  547  548  549  551  552  553  554  555  556  557
[421]  558  559  561  564  566  567  568  569  570  571  572  573  574  576  577
[436]  578  579  580  581  582  583  585  587  589  590  591  593  594  595  596
[451]  598  599  600  601  602  603  604  605  608  610  611  612  613  614  615
[466]  616  619  620  621  622  623  624  627  629  631  632  633  634  635  636
[481]  637  638  639  640  641  644  645  647  648  649  650  651  652  654  655
[496]  656  657  658  659  660  661  662  663  664  665  666  667  668  669  670
[511]  671  672  673  674  675  676  678  679  680  681  682  683  684  685  686
[526]  687  688  689  690  691  692  693  694  696  697  699  702  704  705  706
[541]  707  708  709  710  711  713  714  716  717  719  720  721  722  723  724
[556]  725  726  729  731  732  733  734  735  736  738  739  741  742  743  744
[571]  747  752  754  755  756  757  759  760  761  762  763  765  766  767  768
[586]  771  772  773  774  775  776  777  779  780  781  783  788  790  792  793
[601]  794  795  796  797  798  799  800  801  802  803  804  806  807  808  809
[616]  810  811  812  813  814  815  816  818  819  820  821  822  824  825  826
[631]  828  831  832  833  834  836  837  838  840  842  843  844  845  846  847
[646]  848  849  850  851  852  853  854  855  856  857  858  860  862  863  865
[661]  866  867  868  869  870  871  872  873  874  875  876  877  878  879  880
[676]  881  882  883  884  885  886  887  888  889  890  891  892  894  895  896
[691]  898  900  901  902  903  904  905  910  911  913  914  915  916  917  918
[706]  920  921  922  923  924  926  927  928  929  930  931  932  933  934  935
[721]  936  937  938  939  941  942  943  944  945  946  947  948  949  950  951
[736]  952  953  954  956  957  958  959  960  961  963  964  965  966  967  968
[751]  969  970  971  972  973  974  976  977  978  981  982  983  984  987  989
[766]  990  991  992  993  994  995  996  997  998 1000 1001 1002 1003 1005 1006
[781] 1008 1009 1010 1011 1012 1013 1014 1018 1019 1020 1022 1023 1024 1025 1026
[796] 1027 1028 1029 1031 1034 1035 1036 1037 1039 1040 1041 1042 1044 1047 1048
[811] 1049 1050 1052 1053 1057 1058 1059 1060 1061 1062 1063 1065 1067 1069 1071
[826] 1072 1073 1075 1077 1079 1080 1081 1082 1083 1084 1086 1088 1089 1090 1091
[841] 1093 1095 1096 1097 1098 1099 1100 1101 1103 1104 1108 1109 1110 1111 1112
[856] 1114 1115 1116 1117 1118 1119 1120 1121 1123 1124 1125 1128 1129 1130 1131
[871] 1132 1133 1134 1136 1137 1138 1139 1140 1141 1142 1143 1144 1145 1148 1149
[886] 1151 1152 1155 1158 1162 1163 1164 1166 1169 1170 1171 1172 1174 1175 1176
[901] 1177 1179 1180 1181 1182 1183 1184 1185 1187 1188 1189 1190 1191 1192 1194
[916] 1195 1196 1197 1198 1200 1201 1202 1203 1204 1205 1206 1207 1208 1209 1210
[931] 1211 1212 1213 1214 1217 1218 1221 1222 1223 1224 1225 1226 1227 1228 1229
[946] 1231 1232 1234 1235 1236 1237 1238 1240 1241 1242 1244 1245 1246 1248 1249
[961] 1250 1251 1252 1253 1255 1257 1261 1262 1263 1264 1265 1267 1268 1269 1270
[976] 1271 1272 1273</code></pre>
</div>
</div>
<p>Use indices to select rows w/ selected columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>star[<span class="fu">which</span>(star<span class="sc">$</span>classtype <span class="sc">==</span> <span class="st">'small'</span>), <span class="fu">c</span>(<span class="st">'classtype'</span>, <span class="st">'reading'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     classtype reading
1        small     578
4        small     661
5        small     614
7        small     595
8        small     665
15       small     565
17       small     686
19       small     529
20       small     582
21       small     608
22       small     572
24       small     641
25       small     644
27       small     650
28       small     552
30       small     567
32       small     595
34       small     639
36       small     614
38       small     578
43       small     577
44       small     713
45       small     693
46       small     595
47       small     593
49       small     616
50       small     620
51       small     592
55       small     675
56       small     665
59       small     533
61       small     670
62       small     654
63       small     686
64       small     693
67       small     614
68       small     616
69       small     616
70       small     661
71       small     626
72       small     713
76       small     680
77       small     629
78       small     631
80       small     654
83       small     657
84       small     675
89       small     600
90       small     675
92       small     665
97       small     606
98       small     592
99       small     639
102      small     633
103      small     650
104      small     713
106      small     588
107      small     713
108      small     647
114      small     650
115      small     686
117      small     713
121      small     647
126      small     665
127      small     665
128      small     608
129      small     583
130      small     629
132      small     665
133      small     665
136      small     608
138      small     644
139      small     650
140      small     654
141      small     654
151      small     654
153      small     597
157      small     675
159      small     639
165      small     661
166      small     650
169      small     633
170      small     590
175      small     670
177      small     580
178      small     606
179      small     614
184      small     657
185      small     728
186      small     657
189      small     680
190      small     650
191      small     590
194      small     580
196      small     702
197      small     670
200      small     636
203      small     580
210      small     614
211      small     599
212      small     633
214      small     702
217      small     693
219      small     680
220      small     657
222      small     599
224      small     595
225      small     633
226      small     661
227      small     622
230      small     626
233      small     650
236      small     629
238      small     602
242      small     644
244      small     636
245      small     675
246      small     633
247      small     587
249      small     597
250      small     650
254      small     670
255      small     595
256      small     572
259      small     675
261      small     636
262      small     600
263      small     657
265      small     641
267      small     612
268      small     661
269      small     654
273      small     639
275      small     612
277      small     728
279      small     728
281      small     650
282      small     629
283      small     693
284      small     654
285      small     567
287      small     657
288      small     650
290      small     647
291      small     629
292      small     569
293      small     650
294      small     624
296      small     620
298      small     644
300      small     661
301      small     602
302      small     614
303      small     602
305      small     587
307      small     629
308      small     693
309      small     600
315      small     633
316      small     647
318      small     631
320      small     670
321      small     570
325      small     657
328      small     728
330      small     633
333      small     661
335      small     582
337      small     620
338      small     675
341      small     618
342      small     644
344      small     620
345      small     629
346      small     578
347      small     702
349      small     639
351      small     626
352      small     557
353      small     702
354      small     670
356      small     529
357      small     587
362      small     629
366      small     686
370      small     670
371      small     686
376      small     588
379      small     654
381      small     608
382      small     583
383      small     702
385      small     608
386      small     665
388      small     608
390      small     639
393      small     657
400      small     636
403      small     686
404      small     753
412      small     595
413      small     614
414      small     600
417      small     650
418      small     633
419      small     597
420      small     657
421      small     608
423      small     654
425      small     647
435      small     647
438      small     570
440      small     670
442      small     610
443      small     612
444      small     620
446      small     665
447      small     728
449      small     661
454      small     661
458      small     562
459      small     670
465      small     573
466      small     650
468      small     608
470      small     661
474      small     633
475      small     629
476      small     608
477      small     622
478      small     636
482      small     654
485      small     680
490      small     675
491      small     606
494      small     657
497      small     577
499      small     567
500      small     636
502      small     624
503      small     597
504      small     600
507      small     606
508      small     675
509      small     647
510      small     616
512      small     616
515      small     577
524      small     618
525      small     753
528      small     614
530      small     606
531      small     585
537      small     641
540      small     665
541      small     592
543      small     610
547      small     626
551      small     670
556      small     680
557      small     616
560      small     559
561      small     618
563      small     593
564      small     654
571      small     620
574      small     670
576      small     693
577      small     602
580      small     680
582      small     606
583      small     665
584      small     573
586      small     600
587      small     622
588      small     583
589      small     620
593      small     629
599      small     641
601      small     616
602      small     665
603      small     675
604      small     620
610      small     616
612      small     616
615      small     728
616      small     641
632      small     657
634      small     665
638      small     639
640      small     633
644      small     644
645      small     612
648      small     608
650      small     620
651      small     624
657      small     675
659      small     641
664      small     702
665      small     624
667      small     686
668      small     665
669      small     665
672      small     680
673      small     629
674      small     639
675      small     629
677      small     583
681      small     622
683      small     650
684      small     629
689      small     670
694      small     693
695      small     588
696      small     602
698      small     593
700      small     554
703      small     573
704      small     654
705      small     608
709      small     657
710      small     636
713      small     629
714      small     639
715      small     600
717      small     665
719      small     612
720      small     636
721      small     614
727      small     552
738      small     641
740      small     590
743      small     622
744      small     629
745      small     587
747      small     686
751      small     582
752      small     644
753      small     599
755      small     639
757      small     616
760      small     641
761      small     620
762      small     624
765      small     626
766      small     661
768      small     610
770      small     582
772      small     665
773      small     636
779      small     647
780      small     661
782      small     595
784      small     595
785      small     592
788      small     686
790      small     644
791      small     582
792      small     639
793      small     650
795      small     622
801      small     675
802      small     622
805      small     564
806      small     680
807      small     612
809      small     636
810      small     624
811      small     624
812      small     686
814      small     612
815      small     626
820      small     641
824      small     644
825      small     610
827      small     597
828      small     650
834      small     665
835      small     529
836      small     624
838      small     622
839      small     599
840      small     657
841      small     593
842      small     629
843      small     665
844      small     644
845      small     693
848      small     644
849      small     641
852      small     633
857      small     633
859      small     599
860      small     622
862      small     641
864      small     535
865      small     622
866      small     618
867      small     713
870      small     693
871      small     614
872      small     639
873      small     661
874      small     654
875      small     654
878      small     641
879      small     713
887      small     624
889      small     647
890      small     612
891      small     647
893      small     592
894      small     636
900      small     693
904      small     647
905      small     647
909      small     562
916      small     604
917      small     657
918      small     622
921      small     606
922      small     629
925      small     567
926      small     686
927      small     670
928      small     641
929      small     661
932      small     629
934      small     728
935      small     636
936      small     604
939      small     661
945      small     661
946      small     616
947      small     665
949      small     629
955      small     595
958      small     647
959      small     636
961      small     618
962      small     587
964      small     680
969      small     633
971      small     622
976      small     626
977      small     631
980      small     590
983      small     686
985      small     590
989      small     644
990      small     636
996      small     657
1001     small     693
1003     small     639
1006     small     644
1007     small     572
1008     small     636
1009     small     614
1011     small     629
1018     small     702
1019     small     665
1020     small     606
1024     small     616
1025     small     636
1026     small     602
1029     small     654
1031     small     604
1032     small     587
1033     small     585
1039     small     616
1041     small     650
1043     small     600
1044     small     602
1046     small     593
1050     small     644
1051     small     585
1052     small     633
1053     small     641
1055     small     557
1058     small     675
1059     small     641
1061     small     641
1067     small     650
1072     small     661
1073     small     654
1079     small     647
1080     small     602
1086     small     644
1087     small     588
1088     small     665
1091     small     606
1092     small     600
1099     small     647
1103     small     612
1104     small     622
1105     small     599
1107     small     595
1108     small     606
1109     small     644
1110     small     616
1111     small     647
1114     small     654
1116     small     650
1117     small     650
1119     small     670
1120     small     604
1121     small     636
1122     small     577
1123     small     665
1124     small     680
1125     small     620
1127     small     578
1128     small     633
1130     small     686
1131     small     639
1132     small     650
1133     small     639
1135     small     592
1136     small     680
1137     small     675
1139     small     633
1140     small     624
1141     small     626
1142     small     650
1143     small     675
1145     small     644
1146     small     595
1147     small     588
1148     small     654
1149     small     661
1152     small     629
1155     small     620
1156     small     575
1157     small     600
1158     small     680
1160     small     588
1161     small     593
1162     small     610
1163     small     626
1164     small     633
1167     small     578
1171     small     647
1172     small     650
1174     small     654
1176     small     604
1179     small     606
1181     small     650
1185     small     670
1186     small     588
1187     small     644
1193     small     552
1198     small     633
1201     small     618
1203     small     702
1206     small     606
1207     small     622
1208     small     608
1211     small     647
1215     small     585
1219     small     590
1220     small     569
1221     small     661
1229     small     675
1230     small     557
1231     small     680
1233     small     597
1234     small     670
1235     small     650
1237     small     670
1238     small     686
1239     small     592
1242     small     602
1244     small     624
1245     small     633
1246     small     686
1250     small     639
1256     small     580
1262     small     665
1266     small     590
1267     small     641
1268     small     641
1269     small     657
1271     small     636
1272     small     629
1274     small     575</code></pre>
</div>
</div>
<p><em>subset:</em> subset data frames in base R</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(star, reading <span class="sc">&gt;</span> <span class="dv">600</span>, <span class="fu">c</span>(<span class="st">'classtype'</span>, <span class="st">'reading'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     classtype reading
2      regular     612
4        small     661
5        small     614
6      regular     610
8        small     665
9      regular     616
10     regular     624
13     regular     693
16     regular     654
17       small     686
21       small     608
24       small     641
25       small     644
27       small     650
29     regular     636
33     regular     620
34       small     639
35     regular     633
36       small     614
37     regular     606
40     regular     629
41     regular     675
42     regular     604
44       small     713
45       small     693
49       small     616
50       small     620
52     regular     702
53     regular     636
54     regular     654
55       small     675
56       small     665
58     regular     641
60     regular     616
61       small     670
62       small     654
63       small     686
64       small     693
65     regular     614
66     regular     606
67       small     614
68       small     616
69       small     616
70       small     661
71       small     626
72       small     713
73     regular     636
74     regular     675
75     regular     629
76       small     680
77       small     629
78       small     631
79     regular     650
80       small     654
81     regular     618
82     regular     604
83       small     657
84       small     675
85     regular     665
86     regular     657
88     regular     650
90       small     675
91     regular     665
92       small     665
93     regular     602
94     regular     618
95     regular     608
96     regular     647
97       small     606
99       small     639
100    regular     641
101    regular     657
102      small     633
103      small     650
104      small     713
105    regular     614
107      small     713
108      small     647
109    regular     657
111    regular     654
113    regular     661
114      small     650
115      small     686
116    regular     702
117      small     713
121      small     647
122    regular     728
123    regular     629
124    regular     680
125    regular     657
126      small     665
127      small     665
128      small     608
130      small     629
131    regular     670
132      small     665
133      small     665
134    regular     629
135    regular     614
136      small     608
137    regular     675
138      small     644
139      small     650
140      small     654
141      small     654
143    regular     647
145    regular     713
146    regular     624
147    regular     670
148    regular     680
150    regular     641
151      small     654
154    regular     633
155    regular     624
156    regular     728
157      small     675
159      small     639
160    regular     680
162    regular     670
164    regular     602
165      small     661
166      small     650
167    regular     661
168    regular     650
169      small     633
171    regular     661
172    regular     686
174    regular     620
175      small     670
176    regular     614
178      small     606
179      small     614
180    regular     622
181    regular     639
182    regular     633
184      small     657
185      small     728
186      small     657
187    regular     636
188    regular     606
189      small     680
190      small     650
195    regular     654
196      small     702
197      small     670
198    regular     608
199    regular     680
200      small     636
201    regular     641
202    regular     608
204    regular     686
205    regular     622
206    regular     633
207    regular     610
209    regular     670
210      small     614
212      small     633
213    regular     686
214      small     702
216    regular     622
217      small     693
218    regular     631
219      small     680
220      small     657
221    regular     629
223    regular     665
225      small     633
226      small     661
227      small     622
228    regular     614
229    regular     680
230      small     626
231    regular     602
233      small     650
234    regular     608
235    regular     631
236      small     629
237    regular     657
238      small     602
240    regular     612
241    regular     702
242      small     644
243    regular     608
244      small     636
245      small     675
246      small     633
248    regular     624
250      small     650
252    regular     670
253    regular     686
254      small     670
257    regular     626
258    regular     631
259      small     675
260    regular     675
261      small     636
263      small     657
265      small     641
266    regular     629
267      small     612
268      small     661
269      small     654
270    regular     602
272    regular     620
273      small     639
274    regular     644
275      small     612
276    regular     665
277      small     728
278    regular     629
279      small     728
281      small     650
282      small     629
283      small     693
284      small     654
286    regular     602
287      small     657
288      small     650
290      small     647
291      small     629
293      small     650
294      small     624
295    regular     641
296      small     620
298      small     644
299    regular     606
300      small     661
301      small     602
302      small     614
303      small     602
304    regular     626
306    regular     604
307      small     629
308      small     693
310    regular     629
311    regular     622
312    regular     631
314    regular     693
315      small     633
316      small     647
317    regular     629
318      small     631
319    regular     629
320      small     670
322    regular     616
323    regular     657
325      small     657
326    regular     713
327    regular     602
328      small     728
329    regular     631
330      small     633
331    regular     644
333      small     661
334    regular     606
336    regular     608
337      small     620
338      small     675
340    regular     622
341      small     618
342      small     644
344      small     620
345      small     629
347      small     702
348    regular     686
349      small     639
350    regular     654
351      small     626
353      small     702
354      small     670
359    regular     650
360    regular     604
362      small     629
363    regular     647
364    regular     626
365    regular     636
366      small     686
367    regular     657
369    regular     665
370      small     670
371      small     686
372    regular     661
373    regular     675
374    regular     657
377    regular     654
378    regular     686
379      small     654
380    regular     654
381      small     608
383      small     702
384    regular     626
385      small     608
386      small     665
388      small     608
389    regular     644
390      small     639
393      small     657
394    regular     641
395    regular     631
396    regular     631
398    regular     650
400      small     636
401    regular     657
402    regular     647
403      small     686
404      small     753
405    regular     650
406    regular     633
409    regular     629
411    regular     614
413      small     614
415    regular     602
416    regular     639
417      small     650
418      small     633
420      small     657
421      small     608
422    regular     604
423      small     654
424    regular     622
425      small     647
426    regular     602
427    regular     686
428    regular     644
430    regular     626
432    regular     654
433    regular     647
434    regular     661
435      small     647
436    regular     680
437    regular     602
439    regular     693
440      small     670
441    regular     650
442      small     610
443      small     612
444      small     620
445    regular     650
446      small     665
447      small     728
448    regular     631
449      small     661
450    regular     650
451    regular     633
452    regular     654
453    regular     665
454      small     661
455    regular     680
456    regular     631
459      small     670
461    regular     614
466      small     650
467    regular     622
468      small     608
470      small     661
472    regular     654
473    regular     620
474      small     633
475      small     629
476      small     608
477      small     622
478      small     636
479    regular     633
480    regular     654
481    regular     641
482      small     654
484    regular     626
485      small     680
486    regular     661
487    regular     608
488    regular     675
489    regular     633
490      small     675
491      small     606
492    regular     629
493    regular     610
494      small     657
495    regular     604
496    regular     631
498    regular     644
500      small     636
501    regular     618
502      small     624
505    regular     624
506    regular     693
507      small     606
508      small     675
509      small     647
510      small     616
512      small     616
513    regular     604
517    regular     693
519    regular     654
520    regular     631
521    regular     641
524      small     618
525      small     753
526    regular     636
528      small     614
530      small     606
533    regular     636
534    regular     622
536    regular     650
537      small     641
538    regular     618
539    regular     606
540      small     665
543      small     610
544    regular     624
546    regular     670
547      small     626
548    regular     610
549    regular     631
551      small     670
552    regular     614
553    regular     614
554    regular     626
555    regular     618
556      small     680
557      small     616
558    regular     661
559    regular     693
561      small     618
564      small     654
566    regular     647
567    regular     675
568    regular     693
569    regular     624
570    regular     670
571      small     620
572    regular     608
573    regular     650
574      small     670
576      small     693
577      small     602
578    regular     665
579    regular     629
580      small     680
581    regular     612
582      small     606
583      small     665
585    regular     612
587      small     622
589      small     620
590    regular     636
591    regular     675
593      small     629
594    regular     641
595    regular     657
596    regular     641
598    regular     616
599      small     641
600    regular     641
601      small     616
602      small     665
603      small     675
604      small     620
605    regular     650
608    regular     702
610      small     616
611    regular     631
612      small     616
613    regular     657
614    regular     633
615      small     728
616      small     641
619    regular     622
620    regular     606
621    regular     631
622    regular     636
623    regular     608
624    regular     665
627    regular     618
629    regular     633
631    regular     647
632      small     657
633    regular     636
634      small     665
635    regular     702
636    regular     713
637    regular     631
638      small     639
639    regular     641
640      small     633
641    regular     616
644      small     644
645      small     612
647    regular     629
648      small     608
649    regular     670
650      small     620
651      small     624
652    regular     665
654    regular     633
655    regular     657
656    regular     654
657      small     675
658    regular     616
659      small     641
660    regular     614
661    regular     641
662    regular     665
663    regular     641
664      small     702
665      small     624
666    regular     624
667      small     686
668      small     665
669      small     665
670    regular     633
671    regular     641
672      small     680
673      small     629
674      small     639
675      small     629
676    regular     610
678    regular     636
679    regular     670
680    regular     624
681      small     622
682    regular     650
683      small     650
684      small     629
685    regular     670
686    regular     610
687    regular     624
688    regular     702
689      small     670
690    regular     641
691    regular     622
692    regular     675
693    regular     693
694      small     693
696      small     602
697    regular     654
699    regular     657
702    regular     639
704      small     654
705      small     608
706    regular     650
707    regular     713
708    regular     620
709      small     657
710      small     636
711    regular     650
713      small     629
714      small     639
716    regular     629
717      small     665
719      small     612
720      small     636
721      small     614
722    regular     654
723    regular     629
724    regular     616
725    regular     633
726    regular     661
729    regular     639
731    regular     670
732    regular     644
733    regular     675
734    regular     622
735    regular     616
736    regular     650
738      small     641
739    regular     702
741    regular     675
742    regular     612
743      small     622
744      small     629
747      small     686
752      small     644
754    regular     661
755      small     639
756    regular     713
757      small     616
759    regular     612
760      small     641
761      small     620
762      small     624
763    regular     602
765      small     626
766      small     661
767    regular     608
768      small     610
771    regular     680
772      small     665
773      small     636
774    regular     675
775    regular     614
776    regular     654
777    regular     665
779      small     647
780      small     661
781    regular     616
783    regular     631
788      small     686
790      small     644
792      small     639
793      small     650
794    regular     620
795      small     622
796    regular     661
797    regular     606
798    regular     675
799    regular     604
800    regular     629
801      small     675
802      small     622
803    regular     686
804    regular     624
806      small     680
807      small     612
808    regular     636
809      small     636
810      small     624
811      small     624
812      small     686
813    regular     670
814      small     612
815      small     626
816    regular     616
818    regular     670
819    regular     608
820      small     641
821    regular     657
822    regular     631
824      small     644
825      small     610
826    regular     610
828      small     650
831    regular     610
832    regular     618
833    regular     629
834      small     665
836      small     624
837    regular     641
838      small     622
840      small     657
842      small     629
843      small     665
844      small     644
845      small     693
846    regular     636
847    regular     647
848      small     644
849      small     641
850    regular     657
851    regular     693
852      small     633
853    regular     618
854    regular     693
855    regular     670
856    regular     686
857      small     633
858    regular     650
860      small     622
862      small     641
863    regular     616
865      small     622
866      small     618
867      small     713
868    regular     647
869    regular     644
870      small     693
871      small     614
872      small     639
873      small     661
874      small     654
875      small     654
876    regular     612
877    regular     612
878      small     641
879      small     713
880    regular     622
881    regular     654
882    regular     665
883    regular     670
884    regular     693
885    regular     631
886    regular     606
887      small     624
888    regular     661
889      small     647
890      small     612
891      small     647
892    regular     661
894      small     636
895    regular     647
896    regular     661
898    regular     680
900      small     693
901    regular     610
902    regular     633
903    regular     686
904      small     647
905      small     647
910    regular     616
911    regular     618
913    regular     641
914    regular     624
915    regular     626
916      small     604
917      small     657
918      small     622
920    regular     641
921      small     606
922      small     629
923    regular     647
924    regular     631
926      small     686
927      small     670
928      small     641
929      small     661
930    regular     604
931    regular     661
932      small     629
933    regular     633
934      small     728
935      small     636
936      small     604
937    regular     602
938    regular     629
939      small     661
941    regular     604
942    regular     616
943    regular     641
944    regular     657
945      small     661
946      small     616
947      small     665
948    regular     631
949      small     629
950    regular     647
951    regular     650
952    regular     620
953    regular     624
954    regular     614
956    regular     629
957    regular     650
958      small     647
959      small     636
960    regular     624
961      small     618
963    regular     639
964      small     680
965    regular     644
966    regular     641
967    regular     629
968    regular     650
969      small     633
970    regular     641
971      small     622
972    regular     631
973    regular     702
974    regular     693
976      small     626
977      small     631
978    regular     665
981    regular     661
982    regular     644
983      small     686
984    regular     606
987    regular     629
989      small     644
990      small     636
991    regular     686
992    regular     680
993    regular     606
994    regular     639
995    regular     620
996      small     657
997    regular     608
998    regular     647
1000   regular     616
1001     small     693
1002   regular     702
1003     small     639
1005   regular     622
1006     small     644
1008     small     636
1009     small     614
1010   regular     647
1011     small     629
1012   regular     661
1013   regular     602
1014   regular     629
1018     small     702
1019     small     665
1020     small     606
1022   regular     602
1023   regular     650
1024     small     616
1025     small     636
1026     small     602
1027   regular     641
1028   regular     629
1029     small     654
1031     small     604
1034   regular     622
1035   regular     606
1036   regular     644
1037   regular     633
1039     small     616
1040   regular     604
1041     small     650
1042   regular     629
1044     small     602
1047   regular     675
1048   regular     624
1049   regular     675
1050     small     644
1052     small     633
1053     small     641
1057   regular     608
1058     small     675
1059     small     641
1060   regular     636
1061     small     641
1062   regular     641
1063   regular     610
1065   regular     654
1067     small     650
1069   regular     654
1071   regular     616
1072     small     661
1073     small     654
1075   regular     614
1077   regular     610
1079     small     647
1080     small     602
1081   regular     657
1082   regular     604
1083   regular     626
1084   regular     639
1086     small     644
1088     small     665
1089   regular     680
1090   regular     610
1091     small     606
1093   regular     602
1095   regular     639
1096   regular     647
1097   regular     636
1098   regular     654
1099     small     647
1100   regular     680
1101   regular     604
1103     small     612
1104     small     622
1108     small     606
1109     small     644
1110     small     616
1111     small     647
1112   regular     639
1114     small     654
1115   regular     639
1116     small     650
1117     small     650
1118   regular     636
1119     small     670
1120     small     604
1121     small     636
1123     small     665
1124     small     680
1125     small     620
1128     small     633
1129   regular     614
1130     small     686
1131     small     639
1132     small     650
1133     small     639
1134   regular     631
1136     small     680
1137     small     675
1138   regular     616
1139     small     633
1140     small     624
1141     small     626
1142     small     650
1143     small     675
1144   regular     612
1145     small     644
1148     small     654
1149     small     661
1151   regular     620
1152     small     629
1155     small     620
1158     small     680
1162     small     610
1163     small     626
1164     small     633
1166   regular     614
1169   regular     612
1170   regular     644
1171     small     647
1172     small     650
1174     small     654
1175   regular     606
1176     small     604
1177   regular     602
1179     small     606
1180   regular     633
1181     small     650
1182   regular     606
1183   regular     629
1184   regular     604
1185     small     670
1187     small     644
1188   regular     624
1189   regular     633
1190   regular     650
1191   regular     753
1192   regular     633
1194   regular     647
1195   regular     610
1196   regular     608
1197   regular     654
1198     small     633
1200   regular     693
1201     small     618
1202   regular     606
1203     small     702
1204   regular     602
1205   regular     622
1206     small     606
1207     small     622
1208     small     608
1209   regular     639
1210   regular     626
1211     small     647
1212   regular     636
1213   regular     614
1214   regular     713
1217   regular     626
1218   regular     650
1221     small     661
1222   regular     661
1223   regular     670
1224   regular     614
1225   regular     610
1226   regular     629
1227   regular     602
1228   regular     631
1229     small     675
1231     small     680
1232   regular     631
1234     small     670
1235     small     650
1236   regular     612
1237     small     670
1238     small     686
1240   regular     641
1241   regular     631
1242     small     602
1244     small     624
1245     small     633
1246     small     686
1248   regular     713
1249   regular     602
1250     small     639
1251   regular     629
1252   regular     633
1253   regular     647
1255   regular     616
1257   regular     608
1261   regular     647
1262     small     665
1263   regular     604
1264   regular     636
1265   regular     657
1267     small     641
1268     small     641
1269     small     657
1270   regular     650
1271     small     636
1272     small     629
1273   regular     641</code></pre>
</div>
</div>
</section>
<section id="select-rows-and-columns-with-dplyr-using-the-operator" class="level3">
<h3 class="anchored" data-anchor-id="select-rows-and-columns-with-dplyr-using-the-operator">Select rows and columns with dplyr, using the |&gt; operator</h3>
<p><em>filter:</em> select rows</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages('dplyr')</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.5.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>star <span class="sc">|&gt;</span> <span class="fu">filter</span>(reading <span class="sc">&gt;</span> <span class="dv">600</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  classtype reading math graduated
1   regular     612  612         1
2     small     661  648         1
3     small     614  636         1
4   regular     610  603         0
5     small     665  631         1
6   regular     616  636         1</code></pre>
</div>
</div>
<p><em>select:</em> Select columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>star <span class="sc">|&gt;</span> <span class="fu">select</span>(classtype, reading) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  classtype reading
1     small     578
2   regular     612
3   regular     583
4     small     661
5     small     614
6   regular     610</code></pre>
</div>
</div>
<p>Select rows and columns by combining <em>filter</em> and <em>select</em> with <em>|&gt;</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>star <span class="sc">|&gt;</span> <span class="fu">filter</span>(reading <span class="sc">&gt;</span> <span class="dv">600</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(classtype, reading) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  classtype reading
1   regular     612
2     small     661
3     small     614
4   regular     610
5     small     665
6   regular     616</code></pre>
</div>
</div>
</section>
</section>
<section id="d.-sorting-data" class="level2">
<h2 class="anchored" data-anchor-id="d.-sorting-data">D. Sorting Data</h2>
<section id="sorting-vectors" class="level3">
<h3 class="anchored" data-anchor-id="sorting-vectors">Sorting vectors</h3>
<p><em>sort:</em> the sort function only works for vectors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(star<span class="sc">$</span>reading)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1] 527 529 529 529 533 535 536 538 542 543 545 545 549 549 549 552 552 552
  [19] 552 552 554 554 554 554 555 557 557 557 557 557 557 559 559 559 559 559
  [37] 559 560 560 562 562 562 564 564 564 564 564 565 565 565 565 567 567 567
  [55] 567 569 569 569 569 570 570 570 570 570 570 572 572 572 572 572 573 573
  [73] 573 573 573 573 573 573 575 575 575 575 577 577 577 577 577 577 577 578
  [91] 578 578 578 578 578 578 578 578 578 578 578 578 578 580 580 580 580 580
 [109] 580 580 582 582 582 582 582 582 582 582 582 582 582 582 582 582 582 583
 [127] 583 583 583 583 583 583 583 583 583 585 585 585 585 585 585 585 585 585
 [145] 585 585 585 585 587 587 587 587 587 587 587 587 587 587 587 587 587 587
 [163] 587 588 588 588 588 588 588 588 588 588 588 588 588 588 588 588 590 590
 [181] 590 590 590 590 590 590 590 590 590 590 590 590 590 590 590 592 592 592
 [199] 592 592 592 592 592 592 592 592 592 592 592 592 592 593 593 593 593 593
 [217] 593 593 593 593 593 593 593 593 593 593 593 593 593 593 593 593 595 595
 [235] 595 595 595 595 595 595 595 595 595 595 595 595 595 595 595 595 595 595
 [253] 595 595 595 595 597 597 597 597 597 597 597 597 597 597 597 597 597 599
 [271] 599 599 599 599 599 599 599 599 599 599 599 600 600 600 600 600 600 600
 [289] 600 600 600 600 600 600 600 600 602 602 602 602 602 602 602 602 602 602
 [307] 602 602 602 602 602 602 602 602 602 602 602 602 602 602 602 602 602 604
 [325] 604 604 604 604 604 604 604 604 604 604 604 604 604 604 604 604 604 604
 [343] 604 606 606 606 606 606 606 606 606 606 606 606 606 606 606 606 606 606
 [361] 606 606 606 606 606 606 606 606 606 606 608 608 608 608 608 608 608 608
 [379] 608 608 608 608 608 608 608 608 608 608 608 608 608 608 608 608 608 608
 [397] 608 610 610 610 610 610 610 610 610 610 610 610 610 610 610 610 610 610
 [415] 610 610 612 612 612 612 612 612 612 612 612 612 612 612 612 612 612 612
 [433] 612 612 612 612 614 614 614 614 614 614 614 614 614 614 614 614 614 614
 [451] 614 614 614 614 614 614 614 614 614 614 614 614 614 614 616 616 616 616
 [469] 616 616 616 616 616 616 616 616 616 616 616 616 616 616 616 616 616 616
 [487] 616 616 616 616 616 616 616 616 616 618 618 618 618 618 618 618 618 618
 [505] 618 618 618 618 618 618 620 620 620 620 620 620 620 620 620 620 620 620
 [523] 620 620 620 620 620 620 620 620 620 622 622 622 622 622 622 622 622 622
 [541] 622 622 622 622 622 622 622 622 622 622 622 622 622 622 622 622 622 622
 [559] 622 622 624 624 624 624 624 624 624 624 624 624 624 624 624 624 624 624
 [577] 624 624 624 624 624 624 624 624 624 624 624 626 626 626 626 626 626 626
 [595] 626 626 626 626 626 626 626 626 626 626 626 626 626 629 629 629 629 629
 [613] 629 629 629 629 629 629 629 629 629 629 629 629 629 629 629 629 629 629
 [631] 629 629 629 629 629 629 629 629 629 629 629 629 629 629 629 629 629 629
 [649] 629 629 629 629 629 629 629 629 629 631 631 631 631 631 631 631 631 631
 [667] 631 631 631 631 631 631 631 631 631 631 631 631 631 631 631 631 631 631
 [685] 631 633 633 633 633 633 633 633 633 633 633 633 633 633 633 633 633 633
 [703] 633 633 633 633 633 633 633 633 633 633 633 633 633 633 633 633 633 633
 [721] 633 633 633 633 636 636 636 636 636 636 636 636 636 636 636 636 636 636
 [739] 636 636 636 636 636 636 636 636 636 636 636 636 636 636 636 636 636 636
 [757] 636 636 636 636 639 639 639 639 639 639 639 639 639 639 639 639 639 639
 [775] 639 639 639 639 639 639 639 639 639 639 639 639 639 641 641 641 641 641
 [793] 641 641 641 641 641 641 641 641 641 641 641 641 641 641 641 641 641 641
 [811] 641 641 641 641 641 641 641 641 641 641 641 641 641 641 641 641 641 641
 [829] 641 641 641 644 644 644 644 644 644 644 644 644 644 644 644 644 644 644
 [847] 644 644 644 644 644 644 644 644 644 644 644 644 644 644 647 647 647 647
 [865] 647 647 647 647 647 647 647 647 647 647 647 647 647 647 647 647 647 647
 [883] 647 647 647 647 647 647 647 647 647 647 647 647 647 647 650 650 650 650
 [901] 650 650 650 650 650 650 650 650 650 650 650 650 650 650 650 650 650 650
 [919] 650 650 650 650 650 650 650 650 650 650 650 650 650 650 650 650 650 650
 [937] 650 650 650 650 650 650 650 650 650 654 654 654 654 654 654 654 654 654
 [955] 654 654 654 654 654 654 654 654 654 654 654 654 654 654 654 654 654 654
 [973] 654 654 654 654 654 654 654 654 654 654 654 654 654 657 657 657 657 657
 [991] 657 657 657 657 657 657 657 657 657 657 657 657 657 657 657 657 657 657
[1009] 657 657 657 657 657 657 657 657 657 657 657 661 661 661 661 661 661 661
[1027] 661 661 661 661 661 661 661 661 661 661 661 661 661 661 661 661 661 661
[1045] 661 661 661 661 661 661 661 661 661 661 661 665 665 665 665 665 665 665
[1063] 665 665 665 665 665 665 665 665 665 665 665 665 665 665 665 665 665 665
[1081] 665 665 665 665 665 665 665 665 665 665 665 665 670 670 670 670 670 670
[1099] 670 670 670 670 670 670 670 670 670 670 670 670 670 670 670 670 670 670
[1117] 670 670 670 670 670 670 670 670 670 675 675 675 675 675 675 675 675 675
[1135] 675 675 675 675 675 675 675 675 675 675 675 675 675 675 675 675 675 675
[1153] 675 675 675 675 680 680 680 680 680 680 680 680 680 680 680 680 680 680
[1171] 680 680 680 680 680 680 680 680 680 680 680 686 686 686 686 686 686 686
[1189] 686 686 686 686 686 686 686 686 686 686 686 686 686 686 686 686 686 686
[1207] 686 693 693 693 693 693 693 693 693 693 693 693 693 693 693 693 693 693
[1225] 693 693 693 693 693 693 693 702 702 702 702 702 702 702 702 702 702 702
[1243] 702 702 702 702 702 702 713 713 713 713 713 713 713 713 713 713 713 713
[1261] 713 713 728 728 728 728 728 728 728 728 728 753 753 753</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(star)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `xtfrm.data.frame()`:
! cannot xtfrm data frames</code></pre>
</div>
</div>
</section>
<section id="sorting-data-frames-using-index-numbers" class="level3">
<h3 class="anchored" data-anchor-id="sorting-data-frames-using-index-numbers">Sorting data frames using index numbers</h3>
<p>Order produces index numbers of input vector arranged so that output vector is arranged in ascending order</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(star<span class="sc">$</span>reading)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1] 1004   19  356  835   59  864   39  986 1260  144   14  483  118  192
  [15]  410   28  112  727  897 1193   31  280  397  700  527  232  289  352
  [29]  471 1055 1230  542  560  829  908  999 1038  358  769   23  458  909
  [43]  460  630  701  805 1016   15   26 1054 1199   30  285  499  925   87
  [57]  163  292 1220   18  321  438  592 1126 1153   22  149  256  823 1007
  [71]   57  392  463  465  575  584  703 1045  758  787 1156 1274   43  497
  [85]  515  529  607 1122 1154    1   38  158  297  346  511  523  746 1064
  [99] 1085 1127 1167 1173 1216  173  177  194  203  429  469 1256   20  152
 [113]  332  335  399  407  535  653  728  751  770  791  912 1066 1178    3
 [127]  129  183  382  516  550  588  677  712 1030  110  361  391  531  545
 [141]  618  626 1015 1033 1051 1056 1102 1215  247  305  357  375  431  628
 [155]  745  748  906  907  962  979 1017 1032 1254  106  215  264  368  376
 [169]  532  562  695  718  988 1087 1094 1147 1160 1186  120  170  191  355
 [183]  462  565  597  609  642  646  740  817  861  980  985 1219 1266   51
 [197]   98  541  606  617  625  737  750  785  786  893  919 1021 1135 1239
 [211] 1259   11   47  208  313  324  387  464  518  563  643  698  789  841
 [225]  899 1046 1068 1070 1078 1150 1161 1243    7   32   46  142  161  224
 [239]  239  251  255  271  408  412  514  764  782  784  830  955  975 1107
 [253] 1146 1168 1247 1258  119  153  249  339  419  457  503  749  778  827
 [267] 1113 1165 1233   12   48  211  222  343  753  839  859 1074 1076 1105
 [281] 1106   89  193  262  309  414  504  522  586  715  730  940 1043 1092
 [295] 1157 1159   93  164  231  238  270  286  301  303  327  415  426  437
 [309]  577  696  763  937 1013 1022 1026 1044 1080 1093 1177 1204 1227 1242
 [323] 1249   42   82  306  360  422  495  513  799  916  930  936  941 1031
 [337] 1040 1082 1101 1120 1176 1184 1263   37   66   97  178  188  299  334
 [351]  491  507  530  539  582  620  797  886  921  984  993 1020 1035 1091
 [365] 1108 1175 1179 1182 1202 1206   21   95  128  136  198  202  234  243
 [379]  336  381  385  388  421  468  476  487  572  623  648  705  767  819
 [393]  997 1057 1196 1208 1257    6  207  442  493  543  548  676  686  768
 [407]  825  826  831  901 1063 1077 1090 1162 1195 1225    2  240  267  275
 [421]  443  581  585  645  719  742  759  807  814  876  877  890 1103 1144
 [435] 1169 1236    5   36   65   67  105  135  176  179  210  228  302  411
 [449]  413  461  528  552  553  660  721  775  871  954 1009 1075 1129 1166
 [463] 1213 1224    9   49   60   68   69  322  510  512  557  598  601  610
 [477]  612  641  658  724  735  757  781  816  863  910  942  946 1000 1024
 [491] 1039 1071 1110 1138 1255   81   94  341  501  524  538  555  561  627
 [505]  832  853  866  911  961 1201   33   50  174  272  296  337  344  444
 [519]  473  571  589  604  650  708  761  794  952  995 1125 1151 1155  180
 [533]  205  216  227  311  340  424  467  477  534  587  619  681  691  734
 [547]  743  795  802  838  860  865  880  918  971 1005 1034 1104 1205 1207
 [561]   10  146  155  248  294  502  505  544  569  651  665  666  680  687
 [575]  762  804  810  811  836  887  914  953  960 1048 1140 1188 1244   71
 [589]  230  257  304  351  364  384  430  484  547  554  765  815  915  976
 [603] 1083 1141 1163 1210 1217   40   75   77  123  130  134  221  236  266
 [617]  278  282  291  307  310  317  319  345  362  409  475  492  579  593
 [631]  647  673  675  684  713  716  723  744  800  833  842  922  932  938
 [645]  949  956  967  987 1011 1014 1028 1042 1152 1183 1226 1251 1272   78
 [659]  218  235  258  312  318  329  395  396  448  456  496  520  549  611
 [673]  621  637  783  822  885  924  948  972  977 1134 1228 1232 1241   35
 [687]  102  154  169  182  206  212  225  246  315  330  406  418  451  474
 [701]  479  489  614  629  640  654  670  725  852  857  902  933  969 1037
 [715] 1052 1128 1139 1164 1180 1189 1192 1198 1245 1252   29   53   73  187
 [729]  200  244  261  365  400  478  500  526  533  590  622  633  678  710
 [743]  720  773  808  809  846  894  935  959  990 1008 1025 1060 1097 1118
 [757] 1121 1212 1264 1271   34   99  159  181  273  349  390  416  638  674
 [771]  702  714  729  755  792  872  963  994 1003 1084 1095 1112 1115 1131
 [785] 1133 1209 1250   24   58  100  150  201  265  295  394  481  521  537
 [799]  594  596  599  600  616  639  659  661  663  671  690  738  760  820
 [813]  837  849  862  878  913  920  928  943  966  970 1027 1053 1059 1061
 [827] 1062 1240 1267 1268 1273   25  138  242  274  298  331  342  389  428
 [841]  498  644  732  752  790  824  844  848  869  965  982  989 1006 1036
 [855] 1050 1086 1109 1145 1170 1187   96  108  121  143  290  316  363  402
 [869]  425  433  435  509  566  631  779  847  868  889  891  895  904  905
 [883]  923  950  958  998 1010 1079 1096 1099 1111 1171 1194 1211 1253 1261
 [897]   27   79   88  103  114  139  166  168  190  233  250  281  288  293
 [911]  359  398  405  417  441  445  450  466  536  573  605  682  683  706
 [925]  711  736  793  828  858  951  957  968 1023 1041 1067 1116 1117 1132
 [939] 1142 1172 1181 1190 1218 1235 1270   16   54   62   80  111  140  141
 [953]  151  195  269  284  350  377  379  380  423  432  452  472  480  482
 [967]  519  564  656  697  704  722  776  874  875  881 1029 1065 1069 1073
 [981] 1098 1114 1148 1174 1197   83   86  101  109  125  184  186  220  237
 [995]  263  287  323  325  367  374  393  401  420  494  595  613  632  655
[1009]  699  709  821  840  850  917  944  996 1081 1265 1269    4   70  113
[1023]  165  167  171  226  268  300  333  372  434  449  454  470  486  558
[1037]  726  754  766  780  796  873  888  892  896  929  931  939  945  981
[1051] 1012 1072 1149 1221 1222    8   56   85   91   92  126  127  132  133
[1065]  223  276  369  386  446  453  540  578  583  602  624  634  652  662
[1079]  668  669  717  772  777  834  843  882  947  978 1019 1088 1123 1262
[1093]   61  131  147  162  175  197  209  252  254  320  354  370  440  459
[1107]  546  551  570  574  649  679  685  689  731  813  818  855  883  927
[1121] 1119 1185 1223 1234 1237   41   55   74   84   90  137  157  245  259
[1135]  260  338  373  488  490  508  567  591  603  657  692  733  741  774
[1149]  798  801 1047 1049 1058 1137 1143 1229   76  124  148  160  189  199
[1163]  219  229  436  455  485  556  580  672  771  806  898  964  992 1089
[1177] 1100 1124 1136 1158 1231   17   63  115  172  204  213  253  348  366
[1191]  371  378  403  427  667  747  788  803  812  856  903  926  983  991
[1205] 1130 1238 1246   13   45   64  217  283  308  314  439  506  517  559
[1219]  568  576  693  694  845  851  854  870  884  900  974 1001 1200   52
[1233]  116  196  214  241  347  353  383  608  635  664  688  739  973 1002
[1247] 1018 1203   44   72  104  107  117  145  326  636  707  756  867  879
[1261] 1214 1248  122  156  185  277  279  328  447  615  934  404  525 1191</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>star[<span class="fu">order</span>(star<span class="sc">$</span>reading), <span class="fu">c</span>(<span class="st">'classtype'</span>, <span class="st">'reading'</span>)] <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     classtype reading
1004   regular     527
19       small     529
356      small     529
835      small     529
59       small     533
864      small     535</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>star[<span class="fu">order</span>(star<span class="sc">$</span>classtype, <span class="sc">-</span>star<span class="sc">$</span>reading), ] <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     classtype reading math graduated
1191   regular     753  711         1
122    regular     728  667         1
156    regular     728  726         1
145    regular     713  659         1
326    regular     713  663         1
636    regular     713  711         1</code></pre>
</div>
</div>
</section>
<section id="sorting-with-dplyr" class="level3">
<h3 class="anchored" data-anchor-id="sorting-with-dplyr">Sorting with dplyr</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>star <span class="sc">|&gt;</span> <span class="fu">arrange</span>(classtype, <span class="fu">desc</span>(reading)) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  classtype reading math graduated
1   regular     753  711         1
2   regular     728  667         1
3   regular     728  726         1
4   regular     713  659         1
5   regular     713  663         1
6   regular     713  711         1</code></pre>
</div>
</div>
</section>
<section id="exercise-3-exercise-with-subsetting-3-minutes" class="level3">
<h3 class="anchored" data-anchor-id="exercise-3-exercise-with-subsetting-3-minutes">Exercise 3: Exercise with subsetting (3 minutes)</h3>
<p>Create a subset of mydata, which contains the 25 highest v1 scores</p>
</section>
</section>
<section id="e.-converting-panel-data-from-long-to-wide-and-vice-versa" class="level2">
<h2 class="anchored" data-anchor-id="e.-converting-panel-data-from-long-to-wide-and-vice-versa">E. Converting panel data from long to wide and vice versa</h2>
<p>Make a Panel Dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>health <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">each =</span> <span class="dv">4</span>, <span class="at">len =</span> <span class="dv">40</span>),</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">trial =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>), <span class="dv">10</span>), </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">score =</span> <span class="fu">rnorm</span>(<span class="dv">40</span>, <span class="dv">3</span>, .<span class="dv">75</span>))</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(health, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id trial    score
1  1     1 3.119395
2  1     2 4.595804
3  1     3 3.302816
4  1     4 3.446077
5  2     1 3.074685</code></pre>
</div>
</div>
<section id="reshaping-with-the-reshape-function" class="level3">
<h3 class="anchored" data-anchor-id="reshaping-with-the-reshape-function">Reshaping with the reshape function</h3>
<p>Long –&gt; Wide</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>health_wide <span class="ot">&lt;-</span> <span class="fu">reshape</span>(health, <span class="at">v.names =</span> <span class="st">"score"</span>, <span class="at">idvar =</span> <span class="st">"id"</span>, </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">timevar =</span> <span class="st">"trial"</span>, <span class="at">direction =</span> <span class="st">"wide"</span>) </span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(health_wide, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id  score.1  score.2  score.3  score.4
21  6 3.566013 1.617040 3.608964 2.408355
25  7 3.098134 3.177515 2.519080 3.112346
29  8 2.401564 3.577938 2.770335 3.713319
33  9 2.861051 2.374451 3.598188 1.995026
37 10 3.210847 3.031100 1.614181 2.191189</code></pre>
</div>
</div>
<p>Wide –&gt; Long</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>health_long <span class="ot">&lt;-</span> <span class="fu">reshape</span>(health_wide, <span class="at">idvar =</span> <span class="st">"id"</span>, <span class="at">direction =</span> <span class="st">"long"</span>)         </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(health_long, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    id trial    score
1.1  1     1 3.119395
2.1  2     1 3.074685
3.1  3     1 4.359701
4.1  4     1 3.195748
5.1  5     1 2.748543</code></pre>
</div>
</div>
</section>
<section id="reshaping-panel-data-using-the-tidyr-package" class="level3">
<h3 class="anchored" data-anchor-id="reshaping-panel-data-using-the-tidyr-package">Reshaping panel data using the tidyr package</h3>
<p><em>spread:</em> Convert long data to wide</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages('tidyr')</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.5.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spread</span>(health, <span class="at">key =</span> trial, <span class="at">value =</span> score) <span class="co"># key is the identifier</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id        1        2        3        4
1   1 3.119395 4.595804 3.302816 3.446077
2   2 3.074685 1.681217 2.796525 3.481718
3   3 4.359701 3.539405 4.357051 3.115479
4   4 3.195748 3.692280 1.653513 3.001227
5   5 2.748543 3.726515 4.087056 2.535863
6   6 3.566013 1.617040 3.608964 2.408355
7   7 3.098134 3.177515 2.519080 3.112346
8   8 2.401564 3.577938 2.770335 3.713319
9   9 2.861051 2.374451 3.598188 1.995026
10 10 3.210847 3.031100 1.614181 2.191189</code></pre>
</div>
</div>
<p><em>gather:</em> Convert wide data to long</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(health_wide, <span class="at">key =</span> trial, <span class="at">value =</span> score, score<span class="fl">.1</span><span class="sc">:</span>score<span class="fl">.4</span>) <span class="co"># can also reference by column number(2:5)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id   trial    score
1   1 score.1 3.119395
2   2 score.1 3.074685
3   3 score.1 4.359701
4   4 score.1 3.195748
5   5 score.1 2.748543
6   6 score.1 3.566013
7   7 score.1 3.098134
8   8 score.1 2.401564
9   9 score.1 2.861051
10 10 score.1 3.210847
11  1 score.2 4.595804
12  2 score.2 1.681217
13  3 score.2 3.539405
14  4 score.2 3.692280
15  5 score.2 3.726515
16  6 score.2 1.617040
17  7 score.2 3.177515
18  8 score.2 3.577938
19  9 score.2 2.374451
20 10 score.2 3.031100
21  1 score.3 3.302816
22  2 score.3 2.796525
23  3 score.3 4.357051
24  4 score.3 1.653513
25  5 score.3 4.087056
26  6 score.3 3.608964
27  7 score.3 2.519080
28  8 score.3 2.770335
29  9 score.3 3.598188
30 10 score.3 1.614181
31  1 score.4 3.446077
32  2 score.4 3.481718
33  3 score.4 3.115479
34  4 score.4 3.001227
35  5 score.4 2.535863
36  6 score.4 2.408355
37  7 score.4 3.112346
38  8 score.4 3.713319
39  9 score.4 1.995026
40 10 score.4 2.191189</code></pre>
</div>
</div>
</section>
<section id="exercise-4-exercise-with-reshaping" class="level3">
<h3 class="anchored" data-anchor-id="exercise-4-exercise-with-reshaping">Exercise 4: Exercise with reshaping</h3>
<p>Determine if the dataset below is long or wide, and reshape</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>data_reshape <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">State =</span> <span class="fu">rep</span>(state.name, <span class="dv">4</span>), <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">2010</span><span class="sc">:</span><span class="dv">2013</span>, <span class="at">each =</span> <span class="dv">50</span>), <span class="at">GSPPC =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>, <span class="at">mean =</span> <span class="dv">40000</span>, <span class="at">sd =</span> <span class="dv">10000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="f.-merge-datasets" class="level2">
<h2 class="anchored" data-anchor-id="f.-merge-datasets">F. Merge Datasets</h2>
<p>Create two data with common variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>(data1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">3</span>), <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">2000</span><span class="sc">:</span><span class="dv">2002</span>, <span class="at">each =</span> <span class="dv">5</span>), </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">group =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), <span class="dv">15</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id year group
1   1 2000     A
2   2 2000     C
3   3 2000     C
4   4 2000     C
5   5 2000     A
6   1 2001     B
7   2 2001     C
8   3 2001     B
9   4 2001     A
10  5 2001     A
11  1 2002     B
12  2 2002     B
13  3 2002     C
14  4 2002     B
15  5 2002     C</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>(data2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">each =</span> <span class="dv">4</span>), <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">2000</span><span class="sc">:</span><span class="dv">2003</span>, <span class="dv">5</span>),</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">score =</span> <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">50</span>, <span class="dv">15</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id year    score
1   1 2000 39.59382
2   1 2001 53.10934
3   1 2002 38.25848
4   1 2003 47.67582
5   2 2000 34.88558
6   2 2001 57.78857
7   2 2002 46.50380
8   2 2003 76.90298
9   3 2000 61.64018
10  3 2001 84.44148
11  3 2002 48.77784
12  3 2003 73.89585
13  4 2000 48.12669
14  4 2001 43.35061
15  4 2002 68.13419
16  4 2003 63.23434
17  5 2000 69.67381
18  5 2001 65.41609
19  5 2002 63.86859
20  5 2003 24.91399</code></pre>
</div>
</div>
<section id="merging-using-base-rs-merge-function" class="level3">
<h3 class="anchored" data-anchor-id="merging-using-base-rs-merge-function">Merging using base R’s merge function</h3>
<p>Merge them by id &amp; year, 1:1 merge</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>data_merge <span class="ot">&lt;-</span> <span class="fu">merge</span>(data1, data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span>, <span class="st">"year"</span>)) </span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_merge)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id year group    score
1  1 2000     A 39.59382
2  1 2001     B 53.10934
3  1 2002     B 38.25848
4  2 2000     C 34.88558
5  2 2001     C 57.78857
6  2 2002     B 46.50380</code></pre>
</div>
</div>
<p>Is there anything odd about the merge? <em>Hint:</em> look at the year.</p>
<p>Extra rows from both datasets are added.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>data_merge <span class="ot">&lt;-</span> <span class="fu">merge</span>(data1, data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span>, <span class="st">"year"</span>), <span class="at">all =</span> <span class="cn">TRUE</span>) </span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_merge)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id year group    score
1  1 2000     A 39.59382
2  1 2001     B 53.10934
3  1 2002     B 38.25848
4  1 2003  &lt;NA&gt; 47.67582
5  2 2000     C 34.88558
6  2 2001     C 57.78857</code></pre>
</div>
</div>
<p>If you wanted to do a left merge: x.all=TRUE A right merge: y.all=TRUE</p>
</section>
<section id="merging-with-the-dplyr-package" class="level3">
<h3 class="anchored" data-anchor-id="merging-with-the-dplyr-package">Merging with the dplyr package</h3>
<p><em>inner_join</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>inner_merge <span class="ot">&lt;-</span> data1 <span class="sc">|&gt;</span> <span class="fu">inner_join</span>(data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span>, <span class="st">"year"</span>))</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(inner_merge)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id year group    score
1  1 2000     A 39.59382
2  2 2000     C 34.88558
3  3 2000     C 61.64018
4  4 2000     C 48.12669
5  5 2000     A 69.67381
6  1 2001     B 53.10934</code></pre>
</div>
</div>
<p><em>full_join</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>outer_merge <span class="ot">&lt;-</span> data1 <span class="sc">|&gt;</span> <span class="fu">full_join</span>(data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span>, <span class="st">"year"</span>))</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(outer_merge)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id year group    score
1  1 2000     A 39.59382
2  2 2000     C 34.88558
3  3 2000     C 61.64018
4  4 2000     C 48.12669
5  5 2000     A 69.67381
6  1 2001     B 53.10934</code></pre>
</div>
</div>
</section>
<section id="exercise-5-exercise-with-merging" class="level3">
<h3 class="anchored" data-anchor-id="exercise-5-exercise-with-merging">Exercise 5: Exercise with merging</h3>
<p>Merge the following data set to data1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>(data3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">each =</span> <span class="dv">4</span>), <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">2000</span><span class="sc">:</span><span class="dv">2003</span>, <span class="dv">5</span>),</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">response =</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id year response
1   1 2000        5
2   1 2001        2
3   1 2002        1
4   1 2003        1
5   2 2000        1
6   2 2001        2
7   2 2002        4
8   2 2003        4
9   3 2000        3
10  3 2001        2
11  3 2002        2
12  3 2003        4
13  4 2000        1
14  4 2001        3
15  4 2002        3
16  4 2003        5
17  5 2000        4
18  5 2001        2
19  5 2002        4
20  5 2003        3</code></pre>
</div>
</div>
</section>
</section>
<section id="g.-apply-function-and-aggregate-statistics" class="level2">
<h2 class="anchored" data-anchor-id="g.-apply-function-and-aggregate-statistics">G. Apply function and Aggregate Statistics</h2>
<section id="apply-functions" class="level3">
<h3 class="anchored" data-anchor-id="apply-functions">Apply functions</h3>
<p>Apply mean() across numeric nutrition variables in the star dataset</p>
<p>With MARGIN = 1, apply calculates the <em>mean</em> over rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(star[, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> mean)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1] 594.0 612.0 594.5 654.5 625.0 606.5 602.5 648.0 626.0 625.0 597.0 581.5
  [13] 722.5 555.0 570.5 669.0 674.5 585.5 556.0 582.0 595.5 567.0 577.5 631.5
  [25] 641.5 579.5 652.5 573.0 647.5 561.5 565.5 615.5 649.0 647.0 658.5 603.5
  [37] 602.5 590.5 547.0 634.0 665.0 611.0 572.0 692.5 709.5 602.5 576.0 611.5
  [49] 615.0 608.0 610.5 706.5 622.0 652.5 676.5 652.0 567.0 641.5 550.5 611.0
  [61] 690.5 646.5 693.0 692.0 619.0 593.0 631.0 663.5 639.5 640.5 649.0 702.0
  [73] 633.5 687.5 625.5 685.5 640.0 661.0 649.0 672.5 607.5 620.0 646.5 673.5
  [85] 655.0 660.0 582.5 623.0 608.0 679.5 652.0 662.0 614.0 619.0 628.0 649.0
  [97] 613.0 588.5 624.5 621.0 704.5 618.0 664.0 719.5 621.5 590.5 698.5 646.0
 [109] 652.5 602.5 660.5 584.0 654.5 649.0 676.5 690.0 706.5 554.0 616.5 606.0
 [121] 638.0 697.5 638.5 662.5 644.0 658.0 650.5 626.5 589.5 637.0 677.0 631.0
 [133] 678.0 648.0 614.0 622.0 676.5 634.0 654.5 669.0 654.5 594.5 659.5 559.5
 [145] 686.0 618.0 685.0 685.5 582.5 650.0 660.5 605.5 626.0 632.0 619.0 727.0
 [157] 654.5 581.5 632.5 679.0 612.0 654.5 590.5 598.0 643.5 658.5 669.5 647.5
 [169] 634.5 605.0 648.5 693.0 586.5 646.0 664.5 605.0 584.5 622.5 617.0 616.0
 [181] 625.5 648.0 587.0 660.0 700.0 649.5 625.0 605.0 673.5 632.0 581.5 560.0
 [193] 611.0 594.0 672.5 738.0 698.0 583.0 667.5 618.5 614.5 598.5 604.5 688.5
 [205] 656.5 631.0 638.5 612.0 649.5 640.5 596.5 631.0 682.0 706.5 611.0 630.5
 [217] 696.5 612.0 685.5 667.5 615.0 609.5 655.0 610.5 658.5 693.5 621.0 609.0
 [229] 679.0 614.5 599.0 574.0 638.0 590.5 635.0 616.5 656.0 616.5 604.5 600.0
 [241] 706.5 646.0 610.0 649.5 663.0 626.5 616.0 618.0 615.5 652.5 597.0 662.5
 [253] 676.5 660.5 605.5 580.0 619.0 594.5 660.0 687.5 618.5 605.0 644.0 598.0
 [265] 646.0 620.5 616.0 642.5 644.0 584.5 608.5 608.0 619.0 661.0 623.0 666.0
 [277] 727.0 621.5 709.5 547.5 652.5 632.5 682.5 690.0 562.5 620.5 654.0 640.5
 [289] 563.5 665.5 630.0 564.0 654.5 616.0 650.0 629.5 595.0 647.5 594.0 648.5
 [301] 586.5 609.0 580.5 609.5 590.0 605.0 631.5 680.0 588.0 618.5 635.0 649.0
 [313] 594.5 672.0 652.5 622.0 611.5 632.5 653.5 656.0 593.0 623.5 635.5 611.0
 [325] 670.5 688.0 606.0 706.0 633.5 621.5 636.5 600.0 664.0 636.5 594.0 618.5
 [337] 612.0 673.5 621.0 620.0 630.0 637.5 606.5 609.5 630.0 589.5 676.5 667.0
 [349] 637.5 656.5 611.0 560.5 687.0 664.5 606.0 522.0 590.5 552.0 658.5 604.0
 [361] 588.0 634.0 649.0 612.5 640.5 672.5 645.5 576.0 655.0 677.0 668.5 646.0
 [373] 661.5 664.5 574.5 616.5 656.5 693.0 642.5 645.0 621.0 580.0 690.0 642.5
 [385] 618.5 671.5 577.5 640.0 639.0 655.5 578.0 570.5 651.0 631.5 651.5 630.0
 [397] 567.0 658.5 578.0 642.0 670.5 635.5 674.5 715.5 644.5 628.5 579.5 589.0
 [409] 637.0 548.0 608.5 597.0 619.0 594.5 619.0 620.0 661.0 637.5 595.5 629.0
 [421] 625.0 607.0 656.5 635.0 631.5 593.5 719.0 641.5 585.5 644.5 617.5 641.5
 [433] 635.5 650.0 653.0 648.0 622.0 572.0 696.5 652.0 670.5 594.5 623.0 612.0
 [445] 624.5 635.5 709.5 647.0 686.0 664.0 642.0 652.5 666.0 669.5 659.5 623.5
 [457] 607.5 560.0 690.5 571.5 614.0 588.0 567.5 624.0 602.0 675.0 611.5 625.0
 [469] 584.0 662.0 573.0 654.5 621.0 646.0 632.5 591.0 619.0 649.5 624.5 654.5
 [481] 652.0 649.5 550.5 642.5 669.5 656.0 608.0 667.0 639.0 669.0 625.5 635.5
 [493] 610.0 652.5 596.0 643.0 586.5 634.0 589.5 626.0 628.5 631.5 586.5 605.0
 [505] 626.5 680.0 610.0 650.5 662.5 621.0 587.5 605.0 638.0 600.5 581.0 586.0
 [517] 676.0 609.5 642.5 643.0 643.0 610.0 587.5 623.5 726.5 611.0 574.0 622.5
 [529] 581.5 605.0 590.5 588.5 628.0 647.0 586.5 661.0 656.5 594.0 590.0 668.5
 [541] 610.5 569.5 614.0 618.0 595.5 662.5 621.0 598.0 641.0 603.5 664.5 615.0
 [553] 606.5 604.0 619.0 690.0 619.0 646.0 688.5 571.0 615.0 597.0 611.0 658.5
 [565] 587.5 636.5 669.0 702.0 624.0 690.5 635.5 594.0 637.0 664.5 612.0 709.5
 [577] 608.0 655.0 634.0 679.0 633.5 616.0 634.5 583.0 619.0 598.0 628.0 585.5
 [589] 631.0 637.5 638.0 614.5 653.5 638.5 664.5 650.0 586.0 617.0 656.5 643.0
 [601] 626.0 637.5 679.5 643.5 620.5 597.5 585.5 675.0 600.0 613.0 643.0 602.5
 [613] 670.5 622.5 727.0 670.5 621.5 610.5 609.0 604.5 617.0 633.5 608.0 671.5
 [625] 602.0 612.0 634.5 576.0 658.5 573.0 662.5 656.0 639.0 660.0 690.0 712.0
 [637] 627.5 632.5 636.0 628.5 612.0 602.0 596.0 631.0 595.5 588.0 607.0 612.0
 [649] 666.5 606.5 606.5 656.5 594.0 628.5 639.5 652.5 654.5 629.0 670.5 611.0
 [661] 648.0 671.5 662.5 701.0 624.0 608.5 688.5 662.0 650.5 655.5 633.5 659.5
 [673] 634.0 658.5 619.5 618.0 593.5 651.5 660.5 627.5 625.5 642.0 661.0 653.5
 [685] 698.0 636.5 595.5 680.5 659.0 652.0 642.5 658.5 722.5 692.0 581.0 619.0
 [697] 649.5 588.0 660.0 561.0 573.0 647.0 599.5 663.0 600.5 643.0 695.5 619.0
 [709] 648.0 636.0 661.0 609.5 638.5 653.0 607.0 623.5 640.5 585.0 599.0 654.0
 [721] 610.0 644.0 631.5 630.5 627.5 662.0 558.5 606.5 647.0 607.0 674.0 647.5
 [733] 673.5 636.5 632.0 680.5 625.5 670.5 670.5 598.0 667.0 615.0 635.0 644.0
 [745] 611.5 589.5 688.5 574.5 624.0 594.0 590.5 655.5 590.5 660.0 675.0 692.5
 [757] 626.0 550.5 627.0 662.5 634.0 657.5 609.0 598.0 628.5 656.0 597.0 634.5
 [769] 562.5 576.0 679.0 656.5 640.5 687.5 628.0 641.5 682.5 597.0 627.5 642.5
 [781] 607.5 591.5 654.5 579.5 605.0 591.5 586.0 685.0 616.0 658.0 579.5 639.0
 [793] 649.0 625.5 619.0 650.0 616.0 667.0 602.5 615.0 679.5 591.5 676.5 611.5
 [805] 553.5 669.5 616.0 631.0 657.0 651.0 629.0 674.5 664.5 612.0 626.0 621.0
 [817] 591.5 668.5 598.0 632.5 654.0 645.0 588.0 626.0 629.0 630.5 603.5 638.0
 [829] 570.5 579.5 603.5 634.5 629.0 666.0 544.0 617.0 666.0 620.0 641.5 641.5
 [841] 601.5 627.5 678.0 643.0 696.5 624.0 653.0 622.5 617.5 654.0 672.0 618.5
 [853] 597.0 678.0 666.5 688.5 646.0 661.0 623.5 620.0 604.0 627.5 622.5 560.5
 [865] 602.0 623.5 719.5 634.5 655.5 702.0 616.0 625.5 676.0 660.5 666.0 616.0
 [877] 623.0 611.5 719.5 622.0 660.5 674.5 685.0 676.0 617.5 609.0 619.0 660.0
 [889] 639.0 590.0 632.5 640.5 593.0 628.0 649.0 656.0 547.5 679.0 589.5 696.5
 [901] 624.5 618.5 674.5 643.0 640.5 577.0 602.5 558.5 571.0 601.0 612.0 569.0
 [913] 633.5 645.5 620.0 600.5 662.0 630.5 607.0 650.0 589.5 627.5 643.0 626.5
 [925] 577.5 674.5 656.0 654.0 664.0 600.0 672.5 637.0 610.5 714.0 613.5 602.5
 [937] 619.0 701.5 656.0 608.0 604.0 617.0 631.5 646.5 686.0 606.5 662.0 625.5
 [949] 629.0 641.5 643.0 608.0 619.0 612.0 607.5 616.0 656.5 630.5 631.0 636.0
 [961] 619.0 577.5 675.0 676.0 637.5 617.0 616.0 646.0 650.0 640.0 642.5 665.5
 [973] 701.0 663.5 587.0 622.0 614.0 674.5 588.0 583.0 634.5 639.0 651.0 627.0
 [985] 609.5 541.0 648.0 569.0 653.5 627.0 668.5 665.5 587.0 639.0 618.0 667.5
 [997] 609.0 657.0 573.5 608.5 696.5 696.5 653.0 534.0 611.5 647.5 580.0 673.5
[1009] 625.0 643.0 648.0 666.5 607.0 632.5 558.0 570.0 595.5 669.0 658.0 610.0
[1021] 621.5 595.5 640.5 609.5 647.5 612.0 632.5 623.5 690.0 601.5 647.5 590.5
[1033] 608.0 617.0 606.0 637.5 633.5 557.5 630.5 599.0 652.5 620.5 599.5 618.0
[1045] 570.5 607.5 671.0 639.5 683.0 653.5 589.0 650.0 623.5 566.0 573.0 605.5
[1057] 607.0 683.0 618.5 633.5 659.5 696.5 598.0 600.0 654.5 593.0 639.5 581.5
[1069] 649.5 586.0 617.0 642.5 652.5 607.5 634.5 593.5 602.0 607.5 625.5 608.0
[1081] 660.0 616.5 628.5 645.0 571.5 643.0 611.0 708.5 671.5 615.0 601.5 607.0
[1093] 622.0 616.5 624.5 651.0 643.5 658.5 651.0 671.5 593.5 603.5 656.0 616.0
[1105] 601.5 580.0 601.5 616.0 639.0 607.5 626.5 658.5 596.5 658.5 658.5 656.5
[1117] 643.0 637.5 656.0 607.0 640.5 574.0 664.0 669.5 617.0 576.5 594.0 637.5
[1129] 598.5 676.5 669.5 632.0 639.0 628.5 602.0 682.0 644.5 610.0 632.0 621.0
[1141] 612.5 637.0 655.5 589.5 615.0 594.0 574.5 623.5 651.5 605.5 601.5 635.5
[1153] 585.5 592.5 603.0 577.0 612.0 661.0 599.5 579.0 583.0 607.0 603.0 608.0
[1165] 605.5 610.0 578.5 604.5 631.5 641.5 653.0 664.0 587.5 651.0 621.0 623.0
[1177] 619.0 587.5 601.0 637.5 647.5 628.5 620.5 602.5 674.0 578.0 627.0 626.5
[1189] 631.0 654.5 732.0 625.5 554.0 665.5 638.5 619.5 666.0 637.5 563.0 692.0
[1201] 609.5 616.0 727.0 592.0 624.0 625.5 625.5 574.0 643.5 615.0 662.5 625.0
[1213] 587.5 706.5 597.5 583.0 598.5 667.0 578.5 592.5 648.5 676.0 657.5 615.0
[1225] 612.0 631.5 598.0 617.5 669.0 566.5 716.0 610.0 585.5 664.5 644.5 625.5
[1237] 654.5 698.5 593.0 648.0 622.5 607.0 619.0 606.5 655.5 658.5 571.0 695.5
[1249] 608.0 616.5 614.0 637.5 646.0 603.5 629.0 597.0 615.0 604.5 611.5 545.5
[1261] 632.5 652.0 614.0 635.0 649.5 587.5 640.0 629.5 630.0 656.5 627.0 630.0
[1273] 646.0 575.5</code></pre>
</div>
</div>
<p>With MARGIN = 2, apply calculates the <em>mean</em> over columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(star[, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> reading     math 
628.8030 631.5879 </code></pre>
</div>
</div>
<p>Apply sd() across numeric nutrition variables in the star dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(star[, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>], sd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$reading
[1] 36.72968

$math
[1] 38.83834</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(star[, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>], sd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> reading     math 
36.72968 38.83834 </code></pre>
</div>
</div>
<p>An application of sapply to our vector of fruit names from section 1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>(num_a <span class="ot">&lt;-</span> <span class="fu">sapply</span>(positions_a, <span class="cf">function</span>(x) <span class="fu">ifelse</span>(x[<span class="dv">1</span>] <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="fu">length</span>(x), <span class="dv">0</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 4 0 1 1 2 0 0 2 1 1 1</code></pre>
</div>
</div>
</section>
<section id="aggregation-with-base-r" class="level3">
<h3 class="anchored" data-anchor-id="aggregation-with-base-r">Aggregation with Base R</h3>
<p><em>tapply:</em> Summarizes a variable by a grouping variable and return a vector or an array.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(star<span class="sc">$</span>reading, star<span class="sc">$</span>classtype, summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$regular
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  527.0   602.0   626.0   625.5   650.0   753.0 

$small
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  529.0   606.0   633.0   632.7   657.0   753.0 </code></pre>
</div>
</div>
<p><em>aggregate:</em> Similar to tapply, but it outputs a data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(star<span class="sc">$</span>reading, <span class="fu">list</span>(star<span class="sc">$</span>classtype), mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Group.1        x
1 regular 625.4920
2   small 632.7026</code></pre>
</div>
</div>
</section>
<section id="aggregation-with-dplyr" class="level3">
<h3 class="anchored" data-anchor-id="aggregation-with-dplyr">Aggregation with dplyr</h3>
<p>Use <em>group_by</em> and <em>summarize</em> to produce a data frame that produces summary statistics over your grouping variable(s)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>star <span class="sc">|&gt;</span> </span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(classtype) <span class="sc">|&gt;</span> </span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg.reading =</span> <span class="fu">mean</span>(reading))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  classtype avg.reading
  &lt;chr&gt;           &lt;dbl&gt;
1 regular          625.
2 small            633.</code></pre>
</div>
</div>
<p>You can compute multiple summary statistics at once, such as a count of the number of students in each class type.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>star <span class="sc">|&gt;</span> </span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(classtype) <span class="sc">|&gt;</span> </span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg.reading =</span> <span class="fu">mean</span>(reading), <span class="at">count =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  classtype avg.reading count
  &lt;chr&gt;           &lt;dbl&gt; &lt;int&gt;
1 regular          625.   689
2 small            633.   585</code></pre>
</div>
</div>
<p>dplyr’s <em>mutate</em> function allows users to create variables. When combined with <em>group_by</em> it allows for the creation of summary variables that are added to the original data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>star <span class="sc">|&gt;</span> </span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(classtype) <span class="sc">|&gt;</span> </span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg.reading =</span> <span class="fu">mean</span>(reading), <span class="at">count =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,274 × 6
# Groups:   classtype [2]
   classtype reading  math graduated avg.reading count
   &lt;chr&gt;       &lt;int&gt; &lt;int&gt;     &lt;int&gt;       &lt;dbl&gt; &lt;int&gt;
 1 small         578   610         1        633.   585
 2 regular       612   612         1        625.   689
 3 regular       583   606         1        625.   689
 4 small         661   648         1        633.   585
 5 small         614   636         1        633.   585
 6 regular       610   603         0        625.   689
 7 small         595   610         1        633.   585
 8 small         665   631         1        633.   585
 9 regular       616   636         1        625.   689
10 regular       624   626         1        625.   689
# ℹ 1,264 more rows</code></pre>
</div>
</div>
</section>
<section id="exercise-6-exercise-with-aggregation-3-minutes" class="level3">
<h3 class="anchored" data-anchor-id="exercise-6-exercise-with-aggregation-3-minutes">Exercise 6: Exercise with aggregation (3 minutes)</h3>
<p>Using one of the methods above, find the median math score of students by their graduation status</p>
</section>
</section>
</section>
<section id="iii.-functions" class="level1">
<h1>III. Functions</h1>
<p>Structure of a function in R</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>function.name <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  function_body</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(any_value_to_return)</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Create a simple function that adds two numbers: ‘a’ and ‘b’</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>addTwoNums <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> a <span class="sc">+</span> b</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tmp)</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Alternatively either of the below would substitue for the above</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return(a + b)</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># a + b</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a><span class="fu">addTwoNums</span>(<span class="dv">2</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Does this work? Why or why not?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">addTwoNums</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `addTwoNums()`:
! argument "b" is missing, with no default</code></pre>
</div>
</div>
<p>We can set default values for parameters in a function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>addTwoNums <span class="ot">&lt;-</span> <span class="cf">function</span>(a, <span class="at">b =</span> <span class="dv">2</span>) {</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(a <span class="sc">+</span> b)</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="fu">addTwoNums</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<p>Simple functions are vectorized in R by default, allowing you to run your function over the elements of a vector (assuming other inputs are constant).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">addTwoNums</span>(<span class="at">a =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">10</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6 12  2</code></pre>
</div>
</div>
<p>What happens in this case?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">addTwoNums</span>(<span class="dv">3</span>, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<p>Multiple results to report</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>myOperations <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>  add <span class="ot">&lt;-</span> a <span class="sc">+</span> b</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>  subtract <span class="ot">&lt;-</span> a <span class="sc">-</span> b</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>  multiply <span class="ot">&lt;-</span> a <span class="sc">*</span> b</span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a>  divide <span class="ot">&lt;-</span> a <span class="sc">/</span> b</span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a>  mylist <span class="ot">&lt;-</span> <span class="fu">list</span>(add, subtract, multiply, divide)</span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(mylist)</span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb142-9"><a href="#cb142-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-10"><a href="#cb142-10" aria-hidden="true" tabindex="-1"></a><span class="fu">myOperations</span>(<span class="dv">5</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 15

[[2]]
[1] -5

[[3]]
[1] 50

[[4]]
[1] 0.5</code></pre>
</div>
</div>
<section id="extra-materials" class="level2">
<h2 class="anchored" data-anchor-id="extra-materials">Extra Materials</h2>
<p>Graph a function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) (x <span class="sc">^</span> <span class="dv">3</span> <span class="sc">-</span> <span class="dv">13</span>)</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="sc">-</span><span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>, <span class="fu">f</span>(<span class="sc">-</span><span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>), <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">ylab =</span> <span class="st">"f(x) = x ^ 3 - 13"</span>, <span class="at">xlab =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Data-Wranging-in-R_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><em>switch:</em> A function that returns different output depending on the input Returns output depending on an index number</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span>(<span class="dv">1</span>, <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>),<span class="fu">c</span>(<span class="st">"three"</span>, <span class="st">"four"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "one" "two"</code></pre>
</div>
</div>
<p><em>switch:</em> Returns output depending on labels</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span>(<span class="st">"second"</span>, <span class="at">first =</span> <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>), <span class="at">second =</span> <span class="fu">c</span>(<span class="st">"three"</span>, <span class="st">"four"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "three" "four" </code></pre>
</div>
</div>
<p>A function that takes a numeric vector and performs a significance test with user defined parameters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>my_ttest <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">mu =</span> <span class="dv">0</span>, <span class="at">test =</span> <span class="st">"two-sided"</span>, <span class="at">alpha =</span> <span class="fl">0.05</span>) {</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> n <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>  std <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">var</span>(x))</span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a>  t <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(n) <span class="sc">*</span> (<span class="fu">mean</span>(x) <span class="sc">-</span> mu) <span class="sc">/</span> std  </span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a>  tail_area <span class="ot">&lt;-</span> <span class="cf">switch</span>(test, <span class="st">"two-sided"</span> <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pt</span>(<span class="fu">abs</span>(t), n <span class="sc">-</span> <span class="dv">1</span>)),</span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">lower =</span> <span class="fu">pt</span>(<span class="fu">abs</span>(t), df), <span class="at">upper =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pt</span>(<span class="fu">abs</span>(t), df))</span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">t.statistics =</span> t, <span class="at">degree.freedom =</span> df, <span class="at">p.value =</span> tail_area)</span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true" tabindex="-1"></a><span class="fu">my_ttest</span>(v1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$t.statistics
[1] 49.46162

$degree.freedom
[1] 99

$p.value
[1] 0</code></pre>
</div>
</div>
<section id="exercise-7-exercise-with-functions" class="level3">
<h3 class="anchored" data-anchor-id="exercise-7-exercise-with-functions">Exercise 7: Exercise with functions</h3>
<p>Create a function that identifies the second largest element in a numeric vector</p>
</section>
</section>
</section>
<section id="iv.-for-loop" class="level1">
<h1>IV. For Loop</h1>
<p>Loops allow you to iterate over inputs to produce outputs in a similar way we saw with the apply functions. In fact, apply functions are themselves loops! Writing your own loops gives you the ability to solve more complex problems that couldn’t be easily solved with the suite of apply functions.</p>
<p>Simple loop that prints out university names where <em>univ</em> is the vector if inputs and <em>i</em> is the variable of the loop.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>univ <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Yale"</span>, <span class="st">"Harvard"</span>, <span class="st">"Pittsburg"</span>, <span class="st">"Stevens"</span>, <span class="st">"Rutgers"</span>)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> univ) {</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Yale"
[1] "Harvard"
[1] "Pittsburg"
[1] "Stevens"
[1] "Rutgers"</code></pre>
</div>
</div>
<p>A more sophisticated loop where each i th element in the output is the sum of i and all previous values of the input vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>))  {</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> out <span class="sc">+</span> i</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(out)</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 3
[1] 7
[1] 12</code></pre>
</div>
</div>
<section id="exercise-8-exercise-with-functions" class="level3">
<h3 class="anchored" data-anchor-id="exercise-8-exercise-with-functions">Exercise 8: Exercise with functions</h3>
<p>Create a function that produces a data frame that contains the classtype of the five students with the highest math scores. Hint: see the above example</p>
<p><strong>END OF LECTURE</strong></p>
<p>If you are interested in additional resources to learn about R, check out r-bloggers at the link below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">browseURL</span>(<span class="st">"https://www.r-bloggers.com/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Consider the material below to be supplemental.</p>
</section>
</section>
<section id="v.-ifelse-statements" class="level1">
<h1>V. If/Else Statements</h1>
<section id="if-and-else-statements" class="level2">
<h2 class="anchored" data-anchor-id="if-and-else-statements">If and else statements</h2>
<p>If and else statements allow you to specify outputs that depend on the values of an input</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">10</span>) {</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">"Greater than 10"</span>)</span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">==</span> <span class="dv">10</span>) {</span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">"Equal to 10"</span>)</span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">&amp;&amp;</span> x <span class="sc">&gt;=</span> <span class="dv">0</span>) {</span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">"Between 0 and 10"</span>)</span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">"Less than 0"</span>)</span>
<span id="cb156-10"><a href="#cb156-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Equal to 10"</code></pre>
</div>
</div>
</section>
<section id="the-ifelse-function" class="level2">
<h2 class="anchored" data-anchor-id="the-ifelse-function">The ifelse function</h2>
<p>This function allows you to apply a test over a vector where the output for each vector element is defined in the <em>ifelse</em> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="at">test =</span> x <span class="sc">&lt;</span> <span class="dv">4</span>, <span class="co"># The test</span></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">yes =</span> <span class="st">"less than 4"</span>, <span class="co"># What the function returns when the test is true</span></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">no =</span> <span class="st">"more than equal to 4"</span>) <span class="co"># What is returned when the test is false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "less than 4"          "less than 4"          "less than 4"         
[4] "more than equal to 4"</code></pre>
</div>
</div>
</section>
</section>
<section id="vi.-while-loop" class="level1">
<h1>VI. While Loop</h1>
<p>While loops allow you to specify a condition that will end the loop.</p>
<p>This while loop ends when i is less than or equal to 5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="dv">5</span>) {</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3
[1] 5
[1] 7</code></pre>
</div>
</div>
<p>Here, the while loop ends when univ takes the value of Rutgers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>univ <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Yale"</span>, <span class="st">"Harvard"</span>, <span class="st">"Pittsburg"</span>, <span class="st">"Stevens"</span>, <span class="st">"Rutgers"</span>)</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(univ[i] <span class="sc">!=</span> <span class="st">"Rutgers"</span>) {</span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(univ[i])</span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Yale"
[1] "Harvard"
[1] "Pittsburg"
[1] "Stevens"</code></pre>
</div>
</div>
<p>Create a fuction with a while loop</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>univ_while <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(x[i] <span class="sc">!=</span> <span class="st">"Stevens"</span>) {</span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(x[i])</span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a>    i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb164-8"><a href="#cb164-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-9"><a href="#cb164-9" aria-hidden="true" tabindex="-1"></a><span class="fu">univ_while</span>(univ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Yale"
[1] "Harvard"
[1] "Pittsburg"</code></pre>
</div>
</div>
</section>
<section id="vii.-repeat-loop" class="level1">
<h1>VII. Repeat Loop</h1>
<p>Repeats an action until a <em>break</em> condition is met. Functions similarly to the <em>while</em> loop, except the <em>break</em> is located in the function itself.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="cf">repeat</span> {</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">20</span>) <span class="cf">break</span></span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2
[1] 4
[1] 6
[1] 8
[1] 10
[1] 12
[1] 14
[1] 16
[1] 18
[1] 20</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>univ <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Yale"</span>, <span class="st">"Harvard"</span>, <span class="st">"Pittsburg"</span>, <span class="st">"Stevens"</span>, <span class="st">"Rutgers"</span>)   </span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>f_repeat <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">repeat</span> { </span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(x[i])</span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x[i] <span class="sc">==</span> <span class="st">"Stevens"</span>) <span class="cf">break</span></span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true" tabindex="-1"></a><span class="fu">f_repeat</span>(univ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Yale"
[1] "Harvard"
[1] "Pittsburg"</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>